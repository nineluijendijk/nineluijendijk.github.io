<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Working with relational databases | portfolio_book.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Working with relational databases | portfolio_book.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Working with relational databases | portfolio_book.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="drugscreening.html"/>
<link rel="next" href="parameterized.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="booktheme.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<div class="titleandname">Portfolio Nine Luijendijk</div>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Curriculum Vitae</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact"><i class="fa fa-check"></i>Contact</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#education"><i class="fa fa-check"></i>Education</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#experience"><i class="fa fa-check"></i>Experience</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#languages"><i class="fa fa-check"></i>Languages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="guerillaframework.html"><a href="guerillaframework.html"><i class="fa fa-check"></i><b>1</b> Guerilla Analytics framework</a></li>
<li class="chapter" data-level="2" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html"><i class="fa fa-check"></i><b>2</b> Reproducible Research</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#scoring-the-reproducibility-of-a-research-article"><i class="fa fa-check"></i><b>2.1</b> Scoring the reproducibility of a research article</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#reproducible-research-and-criteria"><i class="fa fa-check"></i><b>2.1.1</b> Reproducible research and criteria</a></li>
<li class="chapter" data-level="2.1.2" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#the-research-article"><i class="fa fa-check"></i><b>2.1.2</b> The research article</a></li>
<li class="chapter" data-level="2.1.3" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#reproducibility-of-the-research"><i class="fa fa-check"></i><b>2.1.3</b> Reproducibility of the research</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#scoring-the-reproducibility-of-the-code-of-the-research"><i class="fa fa-check"></i><b>2.2</b> Scoring the reproducibility of the code of the research</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#criteria-for-the-code"><i class="fa fa-check"></i><b>2.2.1</b> Criteria for the code</a></li>
<li class="chapter" data-level="2.2.2" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#the-code"><i class="fa fa-check"></i><b>2.2.2</b> The code</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#install-andor-load-packages"><i class="fa fa-check"></i>Install and/or load packages</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#multiple-item-psychological-measures"><i class="fa fa-check"></i>Multiple-item Psychological Measures</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#install-andor-load-packages-1"><i class="fa fa-check"></i>Install and/or load packages</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#data-1"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#multiple-item-psychological-measures-1"><i class="fa fa-check"></i>Multiple-item Psychological Measures</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="reproducibleresearch.html"><a href="reproducibleresearch.html#final-rating"><i class="fa fa-check"></i><b>2.3</b> Final rating</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="datanalysis.html"><a href="datanalysis.html"><i class="fa fa-check"></i><b>3</b> Analyzing and visualizing data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="datanalysis.html"><a href="datanalysis.html#preparing-the-data"><i class="fa fa-check"></i><b>3.1</b> Preparing the data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="datanalysis.html"><a href="datanalysis.html#inspecting-the-data-in-r"><i class="fa fa-check"></i><b>3.1.1</b> Inspecting the data in R</a></li>
<li class="chapter" data-level="3.1.2" data-path="datanalysis.html"><a href="datanalysis.html#fixing-the-characterdouble-issue"><i class="fa fa-check"></i><b>3.1.2</b> Fixing the character/double issue</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="datanalysis.html"><a href="datanalysis.html#analyzing-and-visualizing-the-data"><i class="fa fa-check"></i><b>3.2</b> Analyzing and visualizing the data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="datanalysis.html"><a href="datanalysis.html#plan-for-ic50ed50-visualization"><i class="fa fa-check"></i><b>3.2.1</b> Plan for IC50/ED50 visualization</a></li>
<li class="chapter" data-level="3.2.2" data-path="datanalysis.html"><a href="datanalysis.html#normalizing-the-data"><i class="fa fa-check"></i><b>3.2.2</b> Normalizing the data</a></li>
<li class="chapter" data-level="3.2.3" data-path="datanalysis.html"><a href="datanalysis.html#creating-a-legend"><i class="fa fa-check"></i><b>3.2.3</b> Creating a legend</a></li>
<li class="chapter" data-level="3.2.4" data-path="datanalysis.html"><a href="datanalysis.html#generating-the-normalized-plot"><i class="fa fa-check"></i><b>3.2.4</b> Generating the normalized plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="drugscreening.html"><a href="drugscreening.html"><i class="fa fa-check"></i><b>4</b> Drug Screening</a></li>
<li class="chapter" data-level="5" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html"><i class="fa fa-check"></i><b>5</b> Working with relational databases</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#preparing-the-data-1"><i class="fa fa-check"></i><b>5.1</b> Preparing the data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#introduction"><i class="fa fa-check"></i><b>5.1.1</b> Introduction</a></li>
<li class="chapter" data-level="5.1.2" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#importing-the-data-and-making-it-tidy"><i class="fa fa-check"></i><b>5.1.2</b> Importing the data and making it tidy</a></li>
<li class="chapter" data-level="5.1.3" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#connecting-to-the-database"><i class="fa fa-check"></i><b>5.1.3</b> Connecting to the database</a></li>
<li class="chapter" data-level="5.1.4" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#exporting-the-tidy-dataframes-to-the-database"><i class="fa fa-check"></i><b>5.1.4</b> Exporting the tidy dataframes to the database</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#inspecting-the-data"><i class="fa fa-check"></i><b>5.2</b> Inspecting the data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#inspecting-the-data-using-sql"><i class="fa fa-check"></i><b>5.2.1</b> Inspecting the data using SQL</a></li>
<li class="chapter" data-level="5.2.2" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#inspecting-the-data-using-r"><i class="fa fa-check"></i><b>5.2.2</b> Inspecting the data using R</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#combining-the-dataframes"><i class="fa fa-check"></i><b>5.3</b> Combining the dataframes</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#preparing-the-tidy-dataframes"><i class="fa fa-check"></i><b>5.3.1</b> Preparing the tidy dataframes</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#joining-the-dataframes-together"><i class="fa fa-check"></i><b>5.3.2</b> Joining the dataframes together</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#loading-the-combined-tables-into-r"><i class="fa fa-check"></i><b>5.3.3</b> Loading the combined tables into R</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#visualizing-the-data"><i class="fa fa-check"></i><b>5.4</b> Visualizing the data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#normalizing-the-data-1"><i class="fa fa-check"></i><b>5.4.1</b> Normalizing the data</a></li>
<li class="chapter" data-level="5.4.2" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#calculating-descriptive-statistics"><i class="fa fa-check"></i><b>5.4.2</b> Calculating descriptive statistics</a></li>
<li class="chapter" data-level="5.4.3" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#visualizing-correlation"><i class="fa fa-check"></i><b>5.4.3</b> Visualizing correlation</a></li>
<li class="chapter" data-level="5.4.4" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#visualizing-the-dengue-data"><i class="fa fa-check"></i><b>5.4.4</b> Visualizing the dengue data</a></li>
<li class="chapter" data-level="5.4.5" data-path="working-with-relational-databases.html"><a href="working-with-relational-databases.html#visualizing-the-flu-data"><i class="fa fa-check"></i><b>5.4.5</b> Visualizing the flu data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="parameterized.html"><a href="parameterized.html"><i class="fa fa-check"></i><b>6</b> Parameterized report on COVID-19</a>
<ul>
<li class="chapter" data-level="6.1" data-path="parameterized.html"><a href="parameterized.html#parameterized-reports"><i class="fa fa-check"></i><b>6.1</b> Parameterized reports</a></li>
<li class="chapter" data-level="6.2" data-path="parameterized.html"><a href="parameterized.html#the-parameterized-covid-19-report"><i class="fa fa-check"></i><b>6.2</b> The parameterized COVID-19 report</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="parameterized.html"><a href="parameterized.html#the-parameters"><i class="fa fa-check"></i><b>6.2.1</b> The parameters</a></li>
<li class="chapter" data-level="6.2.2" data-path="parameterized.html"><a href="parameterized.html#rendering-the-report"><i class="fa fa-check"></i><b>6.2.2</b> Rendering the report</a></li>
<li class="chapter" data-level="6.2.3" data-path="parameterized.html"><a href="parameterized.html#using-different-parameters"><i class="fa fa-check"></i><b>6.2.3</b> Using different parameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vignette.html"><a href="vignette.html"><i class="fa fa-check"></i><b>7</b> R package vignette</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vignette.html"><a href="vignette.html#creating-the-package"><i class="fa fa-check"></i><b>7.1</b> Creating the package</a></li>
<li class="chapter" data-level="7.2" data-path="vignette.html"><a href="vignette.html#installing-and-loading-the-package"><i class="fa fa-check"></i><b>7.2</b> Installing and loading the package</a></li>
<li class="chapter" data-level="7.3" data-path="vignette.html"><a href="vignette.html#package-contents"><i class="fa fa-check"></i><b>7.3</b> Package contents</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="vignette.html"><a href="vignette.html#dataset-measlesdata"><i class="fa fa-check"></i><b>7.3.1</b> Dataset measlesdata</a></li>
<li class="chapter" data-level="7.3.2" data-path="vignette.html"><a href="vignette.html#function-datasummarizer"><i class="fa fa-check"></i><b>7.3.2</b> Function dataSummarizer()</a></li>
<li class="chapter" data-level="7.3.3" data-path="vignette.html"><a href="vignette.html#function-illnessplot"><i class="fa fa-check"></i><b>7.3.3</b> Function illnessPlot()</a></li>
<li class="chapter" data-level="7.3.4" data-path="vignette.html"><a href="vignette.html#function-fastaimporter.r"><i class="fa fa-check"></i><b>7.3.4</b> Function fastaImporter.R</a></li>
<li class="chapter" data-level="7.3.5" data-path="vignette.html"><a href="vignette.html#function-gotermanalysis"><i class="fa fa-check"></i><b>7.3.5</b> Function gotermAnalysis()</a></li>
<li class="chapter" data-level="7.3.6" data-path="vignette.html"><a href="vignette.html#function-gotermplot"><i class="fa fa-check"></i><b>7.3.6</b> Function gotermPlot()</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="vignette.html"><a href="vignette.html#additional-files"><i class="fa fa-check"></i><b>7.4</b> Additional files</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="primates.html"><a href="primates.html"><i class="fa fa-check"></i><b>8</b> Generating a phylogenetic tree in R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="primates.html"><a href="primates.html#the-plan"><i class="fa fa-check"></i><b>8.1</b> The plan</a></li>
<li class="chapter" data-level="8.2" data-path="primates.html"><a href="primates.html#preparatory-research"><i class="fa fa-check"></i><b>8.2</b> Preparatory research</a></li>
<li class="chapter" data-level="8.3" data-path="primates.html"><a href="primates.html#getting-started"><i class="fa fa-check"></i><b>8.3</b> Getting started</a></li>
<li class="chapter" data-level="8.4" data-path="primates.html"><a href="primates.html#generating-the-first-tree"><i class="fa fa-check"></i><b>8.4</b> Generating the first tree</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="primates.html"><a href="primates.html#obtaining-fasta-sequences"><i class="fa fa-check"></i><b>8.4.1</b> Obtaining FASTA sequences</a></li>
<li class="chapter" data-level="8.4.2" data-path="primates.html"><a href="primates.html#performing-multiple-sequence-alignment"><i class="fa fa-check"></i><b>8.4.2</b> Performing multiple sequence alignment</a></li>
<li class="chapter" data-level="8.4.3" data-path="primates.html"><a href="primates.html#importing-the-aligned-dna"><i class="fa fa-check"></i><b>8.4.3</b> Importing the aligned dna</a></li>
<li class="chapter" data-level="8.4.4" data-path="primates.html"><a href="primates.html#calculating-the-genetic-distances-between-the-sequences-and-drawing-a-tree"><i class="fa fa-check"></i><b>8.4.4</b> Calculating the genetic distances between the sequences and drawing a tree</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="primates.html"><a href="primates.html#different-types-of-phylogenetic-models"><i class="fa fa-check"></i><b>8.5</b> Different types of phylogenetic models</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="primates.html"><a href="primates.html#finding-the-best-model"><i class="fa fa-check"></i><b>8.5.1</b> Finding the best model</a></li>
<li class="chapter" data-level="8.5.2" data-path="primates.html"><a href="primates.html#generating-a-maximum-likelihood-tree"><i class="fa fa-check"></i><b>8.5.2</b> Generating a maximum likelihood tree</a></li>
<li class="chapter" data-level="8.5.3" data-path="primates.html"><a href="primates.html#visualizing-the-maximum-likelihood-cladogram"><i class="fa fa-check"></i><b>8.5.3</b> Visualizing the maximum likelihood cladogram</a></li>
<li class="chapter" data-level="8.5.4" data-path="primates.html"><a href="primates.html#rooting-the-tree"><i class="fa fa-check"></i><b>8.5.4</b> Rooting the tree</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-relational-databases" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Working with relational databases</h1>
<hr />
<p>Having spent so much time analyzing data, it would be useful to learn more about obtaining data from databases, and how to manipulate and analyze relational data using SQL.</p>
<div id="preparing-the-data-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Preparing the data</h2>
<div id="introduction" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Introduction</h3>
<p>In this report I will be analyzing 2 datasets obtained from <a href="http://www.google.org/denguetrends">Google Dengue Trends</a> and <a href="http://www.google.org/flutrends">Google Flu Trends</a>. Sadly, the metadata is incomplete and I am not sure what the numbers mean, it’s not documented. I will be assuming that the datasets contain the number of dengue and flu cases per week of the year, from 2002 through 2015. This shows just how important complete metadata is.</p>
</div>
<div id="importing-the-data-and-making-it-tidy" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Importing the data and making it tidy</h3>
<p>The first step in the data analysis is to import the data into Rstudio and make it tidy, meaning each variable gets its own column, each observation gets its own row and each value its own cell. In this case neither of the datasets were in tidy format, as there were multiple observations in each row. After making the data tidy, the class of every column was checked and changed to match the class of that column in the gapminder ({dslabs}, <span class="citation">(<a href="#ref-irizarryDslabsDataScience2021">Irizarry and Gill 2021</a>)</span>) dataframe, so they can later be joined together. A “year” column was added to both the dengue and the flu data as well, to match the “year” column of gapminder.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="working-with-relational-databases.html#cb23-1" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;data_raw/dengue_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>) <span class="co">#first 11 rows contain metadata</span></span>
<span id="cb23-2"><a href="working-with-relational-databases.html#cb23-2" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;data_raw/flu_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>) <span class="co">#first 11 rows contain metadata</span></span>
<span id="cb23-3"><a href="working-with-relational-databases.html#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="working-with-relational-databases.html#cb23-4" tabindex="-1"></a>dengue_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> dengue_data, </span>
<span id="cb23-5"><a href="working-with-relational-databases.html#cb23-5" tabindex="-1"></a>                            <span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(dengue_data)), </span>
<span id="cb23-6"><a href="working-with-relational-databases.html#cb23-6" tabindex="-1"></a>                            <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, </span>
<span id="cb23-7"><a href="working-with-relational-databases.html#cb23-7" tabindex="-1"></a>                            <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>) <span class="co">#each observation must have its own row</span></span>
<span id="cb23-8"><a href="working-with-relational-databases.html#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="working-with-relational-databases.html#cb23-9" tabindex="-1"></a>flu_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> flu_data, </span>
<span id="cb23-10"><a href="working-with-relational-databases.html#cb23-10" tabindex="-1"></a>                         <span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(flu_data)), </span>
<span id="cb23-11"><a href="working-with-relational-databases.html#cb23-11" tabindex="-1"></a>                         <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, </span>
<span id="cb23-12"><a href="working-with-relational-databases.html#cb23-12" tabindex="-1"></a>                         <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>) <span class="co">#each observation must have its own row</span></span>
<span id="cb23-13"><a href="working-with-relational-databases.html#cb23-13" tabindex="-1"></a></span>
<span id="cb23-14"><a href="working-with-relational-databases.html#cb23-14" tabindex="-1"></a>dengue_tidy <span class="ot">&lt;-</span> dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="fu">substr</span>(Date, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="co">#add &quot;year&quot; column</span></span>
<span id="cb23-15"><a href="working-with-relational-databases.html#cb23-15" tabindex="-1"></a>dengue_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue_tidy<span class="sc">$</span>year) <span class="co">#change class of column year from chr to int</span></span>
<span id="cb23-16"><a href="working-with-relational-databases.html#cb23-16" tabindex="-1"></a></span>
<span id="cb23-17"><a href="working-with-relational-databases.html#cb23-17" tabindex="-1"></a>flu_tidy <span class="ot">&lt;-</span> flu_tidy <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="fu">substr</span>(Date, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="co">#add &quot;year&quot; column</span></span>
<span id="cb23-18"><a href="working-with-relational-databases.html#cb23-18" tabindex="-1"></a>flu_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu_tidy<span class="sc">$</span>year) <span class="co">#change class of column year from chr to int</span></span>
<span id="cb23-19"><a href="working-with-relational-databases.html#cb23-19" tabindex="-1"></a></span>
<span id="cb23-20"><a href="working-with-relational-databases.html#cb23-20" tabindex="-1"></a>dengue_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_tidy<span class="sc">$</span>country) <span class="co">#the column country in gapminder is of the class factor</span></span>
<span id="cb23-21"><a href="working-with-relational-databases.html#cb23-21" tabindex="-1"></a>flu_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_tidy<span class="sc">$</span>country) <span class="co">#the column country in gapminder is of the class factor</span></span></code></pre></div>
<p>The tidy dataframes were then saved as separate rds and csv files:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="working-with-relational-databases.html#cb24-1" tabindex="-1"></a><span class="fu">saveRDS</span>(gapminder, <span class="fu">here</span>(<span class="st">&quot;data/gapminder.rds&quot;</span>)) <span class="co">#store the three tables as .rds and .csv files</span></span>
<span id="cb24-2"><a href="working-with-relational-databases.html#cb24-2" tabindex="-1"></a><span class="fu">saveRDS</span>(dengue_tidy, <span class="fu">here</span>(<span class="st">&quot;data/dengue.rds&quot;</span>))</span>
<span id="cb24-3"><a href="working-with-relational-databases.html#cb24-3" tabindex="-1"></a><span class="fu">saveRDS</span>(flu_tidy, <span class="fu">here</span>(<span class="st">&quot;data/flu.rds&quot;</span>))</span>
<span id="cb24-4"><a href="working-with-relational-databases.html#cb24-4" tabindex="-1"></a><span class="fu">write_csv</span>(gapminder, <span class="fu">here</span>(<span class="st">&quot;data/gapminder.csv&quot;</span>))</span>
<span id="cb24-5"><a href="working-with-relational-databases.html#cb24-5" tabindex="-1"></a><span class="fu">write_csv</span>(dengue_tidy, <span class="fu">here</span>(<span class="st">&quot;data/dengue.csv&quot;</span>))</span>
<span id="cb24-6"><a href="working-with-relational-databases.html#cb24-6" tabindex="-1"></a><span class="fu">write_csv</span>(flu_tidy, <span class="fu">here</span>(<span class="st">&quot;data/flu.csv&quot;</span>))</span></code></pre></div>
</div>
<div id="connecting-to-the-database" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Connecting to the database</h3>
<p>For this analysis, a PostgreSQL database was created in Dbeaver. To connect to the database in Rstudio, the {RPostgres} <span class="citation">(<a href="#ref-wickhamRPostgresRcppInterface2022">H. Wickham, Ooms, and Müller 2022</a>)</span> package was used.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="working-with-relational-databases.html#cb25-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="fu">Postgres</span>(), <span class="co">#connect to the database</span></span>
<span id="cb25-2"><a href="working-with-relational-databases.html#cb25-2" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb25-3"><a href="working-with-relational-databases.html#cb25-3" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb25-4"><a href="working-with-relational-databases.html#cb25-4" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb25-5"><a href="working-with-relational-databases.html#cb25-5" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb25-6"><a href="working-with-relational-databases.html#cb25-6" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;password&quot;</span>)</span></code></pre></div>
</div>
<div id="exporting-the-tidy-dataframes-to-the-database" class="section level3" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Exporting the tidy dataframes to the database</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="working-with-relational-databases.html#cb26-1" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder&quot;</span>, gapminder) <span class="co">#insert the tables into the database</span></span>
<span id="cb26-2"><a href="working-with-relational-databases.html#cb26-2" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue&quot;</span>, dengue_tidy)</span>
<span id="cb26-3"><a href="working-with-relational-databases.html#cb26-3" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu&quot;</span>, flu_tidy)</span></code></pre></div>
</div>
</div>
<div id="inspecting-the-data" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Inspecting the data</h2>
<div id="inspecting-the-data-using-sql" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Inspecting the data using SQL</h3>
<p>To make sure no important data is missing, the tables were checked for NULL values. Data I consider important is the year and the country data, since if there are any missing values here errors may occur.</p>
<details>
<summary>
Checking for NULL values
</summary>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="working-with-relational-databases.html#cb27-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb27-2"><a href="working-with-relational-databases.html#cb27-2" tabindex="-1"></a>  <span class="kw">FROM</span> gapminder</span>
<span id="cb27-3"><a href="working-with-relational-databases.html#cb27-3" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="kw">IS</span> <span class="kw">NULL</span>; <span class="co">--make sure no important values are missing</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-3">Table 5.1: </span>0 records</caption>
<colgroup>
<col width="9%" />
<col width="5%" />
<col width="19%" />
<col width="18%" />
<col width="11%" />
<col width="12%" />
<col width="4%" />
<col width="11%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">year</th>
<th align="right">infant_mortality</th>
<th align="right">life_expectancy</th>
<th align="right">fertility</th>
<th align="right">population</th>
<th align="right">gdp</th>
<th align="left">continent</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb28-1"><a href="working-with-relational-databases.html#cb28-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb28-2"><a href="working-with-relational-databases.html#cb28-2" tabindex="-1"></a>  <span class="kw">FROM</span> gapminder</span>
<span id="cb28-3"><a href="working-with-relational-databases.html#cb28-3" tabindex="-1"></a><span class="kw">WHERE</span> country <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-4">Table 5.2: </span>0 records</caption>
<colgroup>
<col width="9%" />
<col width="5%" />
<col width="19%" />
<col width="18%" />
<col width="11%" />
<col width="12%" />
<col width="4%" />
<col width="11%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">year</th>
<th align="right">infant_mortality</th>
<th align="right">life_expectancy</th>
<th align="right">fertility</th>
<th align="right">population</th>
<th align="right">gdp</th>
<th align="left">continent</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb29"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb29-1"><a href="working-with-relational-databases.html#cb29-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb29-2"><a href="working-with-relational-databases.html#cb29-2" tabindex="-1"></a>  <span class="kw">FROM</span> dengue</span>
<span id="cb29-3"><a href="working-with-relational-databases.html#cb29-3" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-5">Table 5.3: </span>0 records</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="left">country</th>
<th align="right">cases</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb30"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb30-1"><a href="working-with-relational-databases.html#cb30-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb30-2"><a href="working-with-relational-databases.html#cb30-2" tabindex="-1"></a>  <span class="kw">FROM</span> dengue</span>
<span id="cb30-3"><a href="working-with-relational-databases.html#cb30-3" tabindex="-1"></a><span class="kw">WHERE</span> country <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-6">Table 5.4: </span>0 records</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="left">country</th>
<th align="right">cases</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb31"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb31-1"><a href="working-with-relational-databases.html#cb31-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb31-2"><a href="working-with-relational-databases.html#cb31-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu</span>
<span id="cb31-3"><a href="working-with-relational-databases.html#cb31-3" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-7">Table 5.5: </span>0 records</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="left">country</th>
<th align="right">cases</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb32"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb32-1"><a href="working-with-relational-databases.html#cb32-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb32-2"><a href="working-with-relational-databases.html#cb32-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu</span>
<span id="cb32-3"><a href="working-with-relational-databases.html#cb32-3" tabindex="-1"></a><span class="kw">WHERE</span> country <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-8">Table 5.6: </span>0 records</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="left">country</th>
<th align="right">cases</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</details>
<p>There were no records for any of these selects, meaning there are no NULL values anywhere in “year” or “country”.</p>
<p>Now to actually look at the data, there were a couple of statistics I was interested in, like:</p>
<details>
<summary>
How many observations were done
</summary>
<div class="sourceCode" id="cb33"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb33-1"><a href="working-with-relational-databases.html#cb33-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(cases) <span class="co">--count the number of observations (ignoring NULL)</span></span>
<span id="cb33-2"><a href="working-with-relational-databases.html#cb33-2" tabindex="-1"></a>  <span class="kw">FROM</span> dengue; </span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-9">Table 5.7: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">6263</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb34"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb34-1"><a href="working-with-relational-databases.html#cb34-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(cases)</span>
<span id="cb34-2"><a href="working-with-relational-databases.html#cb34-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-10">Table 5.8: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">17266</td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary>
The total number of cases
</summary>
<div class="sourceCode" id="cb35"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb35-1"><a href="working-with-relational-databases.html#cb35-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">SUM</span>(cases) <span class="co">--calculate the total number of cases</span></span>
<span id="cb35-2"><a href="working-with-relational-databases.html#cb35-2" tabindex="-1"></a>  <span class="kw">FROM</span> dengue;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-11">Table 5.9: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">870.376</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb36"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb36-1"><a href="working-with-relational-databases.html#cb36-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">SUM</span>(cases)</span>
<span id="cb36-2"><a href="working-with-relational-databases.html#cb36-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-12">Table 5.10: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">8179518</td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary>
The countries with the highest number of cases
</summary>
<div class="sourceCode" id="cb37"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb37-1"><a href="working-with-relational-databases.html#cb37-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">year</span>, country, cases<span class="op">*</span><span class="dv">1000</span> <span class="kw">AS</span> cases1000 <span class="co">--look at the highest observed numbers of cases</span></span>
<span id="cb37-2"><a href="working-with-relational-databases.html#cb37-2" tabindex="-1"></a>  <span class="kw">FROM</span> dengue</span>
<span id="cb37-3"><a href="working-with-relational-databases.html#cb37-3" tabindex="-1"></a><span class="kw">WHERE</span> cases <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb37-4"><a href="working-with-relational-databases.html#cb37-4" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> cases1000 <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-13">Table 5.11: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">country</th>
<th align="right">cases1000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2008</td>
<td align="left">Brazil</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">Indonesia</td>
<td align="right">1000</td>
</tr>
<tr class="odd">
<td align="right">2012</td>
<td align="left">India</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Mexico</td>
<td align="right">1000</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">Philippines</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Bolivia</td>
<td align="right">1000</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">Thailand</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Argentina</td>
<td align="right">1000</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">Venezuela</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td align="right">2005</td>
<td align="left">Singapore</td>
<td align="right">1000</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb38"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb38-1"><a href="working-with-relational-databases.html#cb38-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">year</span>, country, cases</span>
<span id="cb38-2"><a href="working-with-relational-databases.html#cb38-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu</span>
<span id="cb38-3"><a href="working-with-relational-databases.html#cb38-3" tabindex="-1"></a><span class="kw">WHERE</span> cases <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb38-4"><a href="working-with-relational-databases.html#cb38-4" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> cases <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-14">Table 5.12: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">country</th>
<th align="right">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2013</td>
<td align="left">United States</td>
<td align="right">10555</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">United States</td>
<td align="right">10112</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="left">Canada</td>
<td align="right">9688</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Canada</td>
<td align="right">9630</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">United States</td>
<td align="right">9408</td>
</tr>
<tr class="even">
<td align="right">2012</td>
<td align="left">United States</td>
<td align="right">8618</td>
</tr>
<tr class="odd">
<td align="right">2003</td>
<td align="left">United States</td>
<td align="right">8196</td>
</tr>
<tr class="even">
<td align="right">2012</td>
<td align="left">United States</td>
<td align="right">7904</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">Canada</td>
<td align="right">7698</td>
</tr>
<tr class="even">
<td align="right">2003</td>
<td align="left">Canada</td>
<td align="right">7531</td>
</tr>
</tbody>
</table>
</div>
</details>
</div>
<div id="inspecting-the-data-using-r" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Inspecting the data using R</h3>
<p>Now it’s time to inspect the data in R. When importing the dengue data from its csv, I noticed every value in the dataframe was a fraction instead of a whole number. Since no Readme was provided with the data, I am not sure why this is. To make the values whole, I multiplied the number of cases by 1000.</p>
<p>To find out which countries had the highest and lowest observed number of cases, the following code was used:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="working-with-relational-databases.html#cb39-1" tabindex="-1"></a>dengue_mutated <span class="ot">&lt;-</span> dengue_tidy <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;cases1000&quot;</span> <span class="ot">=</span> cases <span class="sc">*</span> <span class="dv">1000</span>) <span class="co">#add a column with the multiplied number of cases</span></span>
<span id="cb39-2"><a href="working-with-relational-databases.html#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="working-with-relational-databases.html#cb39-3" tabindex="-1"></a>maxcasesdengue <span class="ot">&lt;-</span> <span class="fu">subset</span>(dengue_mutated, cases1000 <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">na.omit</span>(dengue_mutated<span class="sc">$</span>cases1000)))  </span>
<span id="cb39-4"><a href="working-with-relational-databases.html#cb39-4" tabindex="-1"></a>mincasesdengue <span class="ot">&lt;-</span> <span class="fu">subset</span>(dengue_mutated, cases1000 <span class="sc">==</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(dengue_mutated<span class="sc">$</span>cases1000)))</span>
<span id="cb39-5"><a href="working-with-relational-databases.html#cb39-5" tabindex="-1"></a><span class="fu">unique</span>(maxcasesdengue<span class="sc">$</span>country) <span class="co">#look at which countries have the highest observed number of dengue cases</span></span></code></pre></div>
<pre><code>##  [1] Indonesia   Singapore   Brazil      Bolivia     Argentina   Mexico     
##  [7] Venezuela   Philippines India       Thailand   
## 10 Levels: Argentina Bolivia Brazil India Indonesia Mexico ... Venezuela</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="working-with-relational-databases.html#cb41-1" tabindex="-1"></a><span class="fu">unique</span>(mincasesdengue<span class="sc">$</span>country) <span class="co">#look at which countries have the lowest observed number of dengue cases</span></span></code></pre></div>
<pre><code>## [1] India   Bolivia
## 10 Levels: Argentina Bolivia Brazil India Indonesia Mexico ... Venezuela</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="working-with-relational-databases.html#cb43-1" tabindex="-1"></a>maxcasesflu <span class="ot">&lt;-</span> <span class="fu">subset</span>(flu_tidy, cases <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">na.omit</span>(flu_tidy<span class="sc">$</span>cases)))  </span>
<span id="cb43-2"><a href="working-with-relational-databases.html#cb43-2" tabindex="-1"></a>mincasesflu <span class="ot">&lt;-</span> <span class="fu">subset</span>(flu_tidy, cases <span class="sc">==</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(flu_tidy<span class="sc">$</span>cases)))  </span>
<span id="cb43-3"><a href="working-with-relational-databases.html#cb43-3" tabindex="-1"></a><span class="fu">unique</span>(maxcasesflu<span class="sc">$</span>country) <span class="co">#look at which countries have the highest observed number of flu cases</span></span></code></pre></div>
<pre><code>## [1] United States
## 29 Levels: Argentina Australia Austria Belgium Bolivia Brazil ... Uruguay</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="working-with-relational-databases.html#cb45-1" tabindex="-1"></a><span class="fu">unique</span>(mincasesflu<span class="sc">$</span>country) <span class="co">#look at which countries have the lowest observed number of flu cases</span></span></code></pre></div>
<pre><code>## [1] Chile  Sweden
## 29 Levels: Argentina Australia Austria Belgium Bolivia Brazil ... Uruguay</code></pre>
<p>Another statistic is the total number and the average number of cases per country of all years combined.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="working-with-relational-databases.html#cb47-1" tabindex="-1"></a>dengue_country_means <span class="ot">&lt;-</span> dengue_mutated <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="working-with-relational-databases.html#cb47-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(cases1000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">mean =</span> <span class="fu">mean</span>(cases1000, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="working-with-relational-databases.html#cb47-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean)) <span class="co">#calculate the total number of cases and mean number of cases per country</span></span>
<span id="cb47-4"><a href="working-with-relational-databases.html#cb47-4" tabindex="-1"></a></span>
<span id="cb47-5"><a href="working-with-relational-databases.html#cb47-5" tabindex="-1"></a>flu_country_means <span class="ot">&lt;-</span> flu_tidy <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb47-6"><a href="working-with-relational-databases.html#cb47-6" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">mean =</span> <span class="fu">mean</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="working-with-relational-databases.html#cb47-7" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span></code></pre></div>
<details>
<summary>
Dengue numbers
</summary>
<table>
<caption>(#tab:dengue dataframemeans)Table containing dengue numbers per country</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">total</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Venezuela</td>
<td align="right">180893</td>
<td align="right">277.44325</td>
</tr>
<tr class="even">
<td align="left">Thailand</td>
<td align="right">66761</td>
<td align="right">184.93352</td>
</tr>
<tr class="odd">
<td align="left">Indonesia</td>
<td align="right">97124</td>
<td align="right">147.38088</td>
</tr>
<tr class="even">
<td align="left">Singapore</td>
<td align="right">94747</td>
<td align="right">143.77390</td>
</tr>
<tr class="odd">
<td align="left">Brazil</td>
<td align="right">93638</td>
<td align="right">142.09105</td>
</tr>
<tr class="even">
<td align="left">Mexico</td>
<td align="right">92989</td>
<td align="right">141.53577</td>
</tr>
<tr class="odd">
<td align="left">Philippines</td>
<td align="right">88106</td>
<td align="right">136.38700</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="right">76889</td>
<td align="right">116.67527</td>
</tr>
<tr class="odd">
<td align="left">Argentina</td>
<td align="right">49779</td>
<td align="right">76.34816</td>
</tr>
<tr class="even">
<td align="left">Bolivia</td>
<td align="right">29450</td>
<td align="right">44.68892</td>
</tr>
</tbody>
</table>
</details>
<details>
<summary>
Flu numbers
</summary>
<table>
<caption><span id="tab:fludataframemeans">Table 5.13: </span>Table containing flu numbers per country</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">total</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">South Africa</td>
<td align="right">1349388</td>
<td align="right">2698.776000</td>
</tr>
<tr class="even">
<td align="left">Canada</td>
<td align="right">1169673</td>
<td align="right">1886.569355</td>
</tr>
<tr class="odd">
<td align="left">United States</td>
<td align="right">1142909</td>
<td align="right">1843.401613</td>
</tr>
<tr class="even">
<td align="left">Mexico</td>
<td align="right">703432</td>
<td align="right">1134.567742</td>
</tr>
<tr class="odd">
<td align="left">Austria</td>
<td align="right">500332</td>
<td align="right">806.987097</td>
</tr>
<tr class="even">
<td align="left">Germany</td>
<td align="right">496073</td>
<td align="right">800.117742</td>
</tr>
<tr class="odd">
<td align="left">Romania</td>
<td align="right">463130</td>
<td align="right">709.234303</td>
</tr>
<tr class="even">
<td align="left">Bulgaria</td>
<td align="right">331824</td>
<td align="right">595.734291</td>
</tr>
<tr class="odd">
<td align="left">Russia</td>
<td align="right">262781</td>
<td align="right">463.458554</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="right">219016</td>
<td align="right">436.286853</td>
</tr>
<tr class="odd">
<td align="left">Ukraine</td>
<td align="right">204308</td>
<td align="right">397.486381</td>
</tr>
<tr class="even">
<td align="left">Bolivia</td>
<td align="right">192202</td>
<td align="right">295.241167</td>
</tr>
<tr class="odd">
<td align="left">Japan</td>
<td align="right">160897</td>
<td align="right">261.196429</td>
</tr>
<tr class="even">
<td align="left">Paraguay</td>
<td align="right">135348</td>
<td align="right">253.460674</td>
</tr>
<tr class="odd">
<td align="left">Peru</td>
<td align="right">144810</td>
<td align="right">219.742033</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">138825</td>
<td align="right">210.660091</td>
</tr>
<tr class="odd">
<td align="left">Argentina</td>
<td align="right">100391</td>
<td align="right">153.503058</td>
</tr>
<tr class="even">
<td align="left">Belgium</td>
<td align="right">76869</td>
<td align="right">123.982258</td>
</tr>
<tr class="odd">
<td align="left">Uruguay</td>
<td align="right">76395</td>
<td align="right">117.893518</td>
</tr>
<tr class="even">
<td align="left">France</td>
<td align="right">61625</td>
<td align="right">99.395161</td>
</tr>
<tr class="odd">
<td align="left">Hungary</td>
<td align="right">50572</td>
<td align="right">90.146168</td>
</tr>
<tr class="even">
<td align="left">Norway</td>
<td align="right">40462</td>
<td align="right">72.124777</td>
</tr>
<tr class="odd">
<td align="left">Switzerland</td>
<td align="right">43573</td>
<td align="right">70.850407</td>
</tr>
<tr class="even">
<td align="left">Poland</td>
<td align="right">30456</td>
<td align="right">53.619718</td>
</tr>
<tr class="odd">
<td align="left">Spain</td>
<td align="right">31856</td>
<td align="right">51.380645</td>
</tr>
<tr class="even">
<td align="left">New Zealand</td>
<td align="right">19595</td>
<td align="right">39.033864</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="right">22408</td>
<td align="right">36.200323</td>
</tr>
<tr class="even">
<td align="left">Chile</td>
<td align="right">7544</td>
<td align="right">11.482496</td>
</tr>
<tr class="odd">
<td align="left">Sweden</td>
<td align="right">2824</td>
<td align="right">5.548134</td>
</tr>
</tbody>
</table>
</details>
<p>Though interesting, these numbers only represent the total number of cases, not taking into account the size of the difference in population between countries. That is where the gapminder dataframe comes into play, containing exactly the data needed to include the population in the calculations.</p>
</div>
</div>
<div id="combining-the-dataframes" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Combining the dataframes</h2>
<div id="preparing-the-tidy-dataframes" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Preparing the tidy dataframes</h3>
<p>To prepare the dataframes for the joining NA values were removed, and both the sum and the weekly mean of the number of cases were added.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="working-with-relational-databases.html#cb48-1" tabindex="-1"></a><span class="co">#calculate the number of cases per year and the average number of cases per week per country</span></span>
<span id="cb48-2"><a href="working-with-relational-databases.html#cb48-2" tabindex="-1"></a>dengue_combine <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dengue_mutated) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="working-with-relational-databases.html#cb48-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_cases_dengue =</span> <span class="fu">sum</span>(cases1000), <span class="at">mean_weekly_dengue =</span> <span class="fu">mean</span>(cases1000))</span>
<span id="cb48-4"><a href="working-with-relational-databases.html#cb48-4" tabindex="-1"></a></span>
<span id="cb48-5"><a href="working-with-relational-databases.html#cb48-5" tabindex="-1"></a>flu_combine <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(flu_tidy) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span> </span>
<span id="cb48-6"><a href="working-with-relational-databases.html#cb48-6" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_cases_flu =</span> <span class="fu">sum</span>(cases), <span class="at">mean_weekly_flu =</span> <span class="fu">mean</span>(cases))</span></code></pre></div>
</div>
<div id="joining-the-dataframes-together" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Joining the dataframes together</h3>
<p>The new dataframes were then exported to the database, where they were joined using SQL:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="working-with-relational-databases.html#cb49-1" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_combine&quot;</span>, dengue_combine) <span class="co">#insert the new tables into the database</span></span>
<span id="cb49-2"><a href="working-with-relational-databases.html#cb49-2" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_combine&quot;</span>, flu_combine)</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb50-1"><a href="working-with-relational-databases.html#cb50-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dengue_gapminder <span class="kw">AS</span> <span class="co">--combine dengue_data and gapminder</span></span>
<span id="cb50-2"><a href="working-with-relational-databases.html#cb50-2" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb50-3"><a href="working-with-relational-databases.html#cb50-3" tabindex="-1"></a>    gapminder.country,</span>
<span id="cb50-4"><a href="working-with-relational-databases.html#cb50-4" tabindex="-1"></a>    gapminder.<span class="dt">year</span>,</span>
<span id="cb50-5"><a href="working-with-relational-databases.html#cb50-5" tabindex="-1"></a>    gapminder.population,</span>
<span id="cb50-6"><a href="working-with-relational-databases.html#cb50-6" tabindex="-1"></a>    gapminder.continent,</span>
<span id="cb50-7"><a href="working-with-relational-databases.html#cb50-7" tabindex="-1"></a>    gapminder.region,</span>
<span id="cb50-8"><a href="working-with-relational-databases.html#cb50-8" tabindex="-1"></a>    dengue_combine.total_cases_dengue,</span>
<span id="cb50-9"><a href="working-with-relational-databases.html#cb50-9" tabindex="-1"></a>    dengue_combine.mean_weekly_dengue</span>
<span id="cb50-10"><a href="working-with-relational-databases.html#cb50-10" tabindex="-1"></a>  <span class="kw">FROM</span> gapminder</span>
<span id="cb50-11"><a href="working-with-relational-databases.html#cb50-11" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> dengue_combine</span>
<span id="cb50-12"><a href="working-with-relational-databases.html#cb50-12" tabindex="-1"></a>  <span class="kw">ON</span> gapminder.country <span class="op">=</span> dengue_combine.country</span>
<span id="cb50-13"><a href="working-with-relational-databases.html#cb50-13" tabindex="-1"></a>    <span class="kw">AND</span> gapminder.<span class="dt">year</span> <span class="op">=</span> dengue_combine.<span class="dt">year</span>;</span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb51-1"><a href="working-with-relational-databases.html#cb51-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flu_gapminder <span class="kw">AS</span> <span class="co">--combine flu_data and gapminder</span></span>
<span id="cb51-2"><a href="working-with-relational-databases.html#cb51-2" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb51-3"><a href="working-with-relational-databases.html#cb51-3" tabindex="-1"></a>    gapminder.country,</span>
<span id="cb51-4"><a href="working-with-relational-databases.html#cb51-4" tabindex="-1"></a>    gapminder.<span class="dt">year</span>,</span>
<span id="cb51-5"><a href="working-with-relational-databases.html#cb51-5" tabindex="-1"></a>    gapminder.population,</span>
<span id="cb51-6"><a href="working-with-relational-databases.html#cb51-6" tabindex="-1"></a>    gapminder.continent,</span>
<span id="cb51-7"><a href="working-with-relational-databases.html#cb51-7" tabindex="-1"></a>    gapminder.region,</span>
<span id="cb51-8"><a href="working-with-relational-databases.html#cb51-8" tabindex="-1"></a>    flu_combine.total_cases_flu,</span>
<span id="cb51-9"><a href="working-with-relational-databases.html#cb51-9" tabindex="-1"></a>    flu_combine.mean_weekly_flu</span>
<span id="cb51-10"><a href="working-with-relational-databases.html#cb51-10" tabindex="-1"></a>  <span class="kw">FROM</span> gapminder</span>
<span id="cb51-11"><a href="working-with-relational-databases.html#cb51-11" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> flu_combine</span>
<span id="cb51-12"><a href="working-with-relational-databases.html#cb51-12" tabindex="-1"></a>  <span class="kw">ON</span> gapminder.country <span class="op">=</span> flu_combine.country</span>
<span id="cb51-13"><a href="working-with-relational-databases.html#cb51-13" tabindex="-1"></a>    <span class="kw">AND</span> gapminder.<span class="dt">year</span> <span class="op">=</span> flu_combine.<span class="dt">year</span>;</span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb52-1"><a href="working-with-relational-databases.html#cb52-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flu_gapminder_dengue <span class="kw">AS</span>    <span class="co">--combine all 3 tables</span></span>
<span id="cb52-2"><a href="working-with-relational-databases.html#cb52-2" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb52-3"><a href="working-with-relational-databases.html#cb52-3" tabindex="-1"></a>    flu_gapminder.country,</span>
<span id="cb52-4"><a href="working-with-relational-databases.html#cb52-4" tabindex="-1"></a>    flu_gapminder.<span class="dt">year</span>,</span>
<span id="cb52-5"><a href="working-with-relational-databases.html#cb52-5" tabindex="-1"></a>    flu_gapminder.population,</span>
<span id="cb52-6"><a href="working-with-relational-databases.html#cb52-6" tabindex="-1"></a>    flu_gapminder.continent,</span>
<span id="cb52-7"><a href="working-with-relational-databases.html#cb52-7" tabindex="-1"></a>    flu_gapminder.region,</span>
<span id="cb52-8"><a href="working-with-relational-databases.html#cb52-8" tabindex="-1"></a>    flu_gapminder.total_cases_flu,</span>
<span id="cb52-9"><a href="working-with-relational-databases.html#cb52-9" tabindex="-1"></a>    flu_gapminder.mean_weekly_flu,</span>
<span id="cb52-10"><a href="working-with-relational-databases.html#cb52-10" tabindex="-1"></a>    dengue_combine.total_cases_dengue,</span>
<span id="cb52-11"><a href="working-with-relational-databases.html#cb52-11" tabindex="-1"></a>    dengue_combine.mean_weekly_dengue</span>
<span id="cb52-12"><a href="working-with-relational-databases.html#cb52-12" tabindex="-1"></a>  <span class="kw">FROM</span> flu_gapminder</span>
<span id="cb52-13"><a href="working-with-relational-databases.html#cb52-13" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> dengue_combine</span>
<span id="cb52-14"><a href="working-with-relational-databases.html#cb52-14" tabindex="-1"></a>  <span class="kw">ON</span> flu_gapminder.country <span class="op">=</span> dengue_combine.country</span>
<span id="cb52-15"><a href="working-with-relational-databases.html#cb52-15" tabindex="-1"></a>    <span class="kw">AND</span> flu_gapminder.<span class="dt">year</span> <span class="op">=</span> dengue_combine.<span class="dt">year</span>;</span></code></pre></div>
</div>
<div id="loading-the-combined-tables-into-r" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Loading the combined tables into R</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="working-with-relational-databases.html#cb53-1" tabindex="-1"></a>dengue_gapminder <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;dengue_gapminder&quot;</span>) <span class="co">#load the combined tables into R</span></span>
<span id="cb53-2"><a href="working-with-relational-databases.html#cb53-2" tabindex="-1"></a>flu_gapminder <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;flu_gapminder&quot;</span>)</span>
<span id="cb53-3"><a href="working-with-relational-databases.html#cb53-3" tabindex="-1"></a>flu_gapminder_dengue <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;flu_gapminder_dengue&quot;</span>)</span>
<span id="cb53-4"><a href="working-with-relational-databases.html#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="working-with-relational-databases.html#cb53-5" tabindex="-1"></a>dengue_gapminder_nona <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dengue_gapminder) <span class="co">#remove NA values</span></span>
<span id="cb53-6"><a href="working-with-relational-databases.html#cb53-6" tabindex="-1"></a>flu_gapminder_nona <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(flu_gapminder)</span>
<span id="cb53-7"><a href="working-with-relational-databases.html#cb53-7" tabindex="-1"></a>flu_gapminder_dengue_nona <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(flu_gapminder_dengue)</span></code></pre></div>
</div>
</div>
<div id="visualizing-the-data" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Visualizing the data</h2>
<div id="normalizing-the-data-1" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Normalizing the data</h3>
<p>Now that the dataframes are combined, the gapminder column “population” can be used to normalize the data. We now know the average number of weekly cases per 100.000 population, of every country per year.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="working-with-relational-databases.html#cb54-1" tabindex="-1"></a><span class="co">#normalize the data by calculating the average number of cases per 100,000 population</span></span>
<span id="cb54-2"><a href="working-with-relational-databases.html#cb54-2" tabindex="-1"></a>dengue_gapminder_normalized <span class="ot">&lt;-</span> dengue_gapminder_nona <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;normalized_dengue&quot;</span> <span class="ot">=</span> (total_cases_dengue<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb54-3"><a href="working-with-relational-databases.html#cb54-3" tabindex="-1"></a>                                                                <span class="st">&quot;normalized_dengue_mean&quot;</span> <span class="ot">=</span> (mean_weekly_dengue<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>)</span>
<span id="cb54-4"><a href="working-with-relational-databases.html#cb54-4" tabindex="-1"></a></span>
<span id="cb54-5"><a href="working-with-relational-databases.html#cb54-5" tabindex="-1"></a>flu_gapminder_normalized <span class="ot">&lt;-</span> flu_gapminder_nona <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;normalized_flu&quot;</span> <span class="ot">=</span> (total_cases_flu<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb54-6"><a href="working-with-relational-databases.html#cb54-6" tabindex="-1"></a>                                                          <span class="st">&quot;normalized_flu_mean&quot;</span> <span class="ot">=</span> (mean_weekly_flu<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>)</span>
<span id="cb54-7"><a href="working-with-relational-databases.html#cb54-7" tabindex="-1"></a></span>
<span id="cb54-8"><a href="working-with-relational-databases.html#cb54-8" tabindex="-1"></a>flu_gapminder_dengue_normalized <span class="ot">&lt;-</span> flu_gapminder_dengue_nona <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;normalized_dengue&quot;</span> <span class="ot">=</span> (total_cases_dengue<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb54-9"><a href="working-with-relational-databases.html#cb54-9" tabindex="-1"></a>                                                                        <span class="st">&quot;normalized_flu&quot;</span> <span class="ot">=</span> (total_cases_flu<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb54-10"><a href="working-with-relational-databases.html#cb54-10" tabindex="-1"></a>                                                                        <span class="st">&quot;normalized_dengue_mean&quot;</span> <span class="ot">=</span> (mean_weekly_dengue<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb54-11"><a href="working-with-relational-databases.html#cb54-11" tabindex="-1"></a>                                                                        <span class="st">&quot;normalized_flu_mean&quot;</span> <span class="ot">=</span> (mean_weekly_flu<span class="sc">/</span>population)<span class="sc">*</span><span class="dv">100000</span>)</span></code></pre></div>
</div>
<div id="calculating-descriptive-statistics" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Calculating descriptive statistics</h3>
<p>In an attempt to find some descriptive statistics, I tried calculating the means, standard deviations and Shapiro-Wilk p-values (to see if the data is from a normal distribution).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="working-with-relational-databases.html#cb55-1" tabindex="-1"></a><span class="co">#calculate means, standard deviations and Shapiro-Wilk p-values per region</span></span>
<span id="cb55-2"><a href="working-with-relational-databases.html#cb55-2" tabindex="-1"></a>dengue_gap_summary <span class="ot">&lt;-</span> dengue_gapminder_normalized <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="working-with-relational-databases.html#cb55-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(total_cases_dengue),</span>
<span id="cb55-4"><a href="working-with-relational-databases.html#cb55-4" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(total_cases_dengue),</span>
<span id="cb55-5"><a href="working-with-relational-databases.html#cb55-5" tabindex="-1"></a>            <span class="at">pvalue_sw =</span> <span class="fu">shapiro.test</span>(total_cases_dengue)<span class="sc">$</span>p.value)</span>
<span id="cb55-6"><a href="working-with-relational-databases.html#cb55-6" tabindex="-1"></a></span>
<span id="cb55-7"><a href="working-with-relational-databases.html#cb55-7" tabindex="-1"></a>flu_gap_summary <span class="ot">&lt;-</span>flu_gapminder_normalized <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb55-8"><a href="working-with-relational-databases.html#cb55-8" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(total_cases_flu),</span>
<span id="cb55-9"><a href="working-with-relational-databases.html#cb55-9" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(total_cases_flu),</span>
<span id="cb55-10"><a href="working-with-relational-databases.html#cb55-10" tabindex="-1"></a>            <span class="at">pvalue_sw =</span> <span class="fu">shapiro.test</span>(total_cases_flu)<span class="sc">$</span>p.value)</span>
<span id="cb55-11"><a href="working-with-relational-databases.html#cb55-11" tabindex="-1"></a></span>
<span id="cb55-12"><a href="working-with-relational-databases.html#cb55-12" tabindex="-1"></a><span class="co">#calculate means, standard deviations and Shapiro-Wilk p-values per country</span></span>
<span id="cb55-13"><a href="working-with-relational-databases.html#cb55-13" tabindex="-1"></a>dengue_gap_summary_country <span class="ot">&lt;-</span> dengue_gapminder_normalized <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb55-14"><a href="working-with-relational-databases.html#cb55-14" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(total_cases_dengue),</span>
<span id="cb55-15"><a href="working-with-relational-databases.html#cb55-15" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(total_cases_dengue),</span>
<span id="cb55-16"><a href="working-with-relational-databases.html#cb55-16" tabindex="-1"></a>            <span class="at">pvalue_sw =</span> <span class="fu">shapiro.test</span>(total_cases_dengue)<span class="sc">$</span>p.value)</span>
<span id="cb55-17"><a href="working-with-relational-databases.html#cb55-17" tabindex="-1"></a></span>
<span id="cb55-18"><a href="working-with-relational-databases.html#cb55-18" tabindex="-1"></a>flu_gap_summary_country <span class="ot">&lt;-</span>flu_gapminder_normalized <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb55-19"><a href="working-with-relational-databases.html#cb55-19" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(total_cases_flu),</span>
<span id="cb55-20"><a href="working-with-relational-databases.html#cb55-20" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(total_cases_flu),</span>
<span id="cb55-21"><a href="working-with-relational-databases.html#cb55-21" tabindex="-1"></a>            <span class="at">pvalue_sw =</span> <span class="fu">shapiro.test</span>(total_cases_flu)<span class="sc">$</span>p.value)</span></code></pre></div>
<p>Not every country has a normal distribution (normal distribution is where p &gt; 0.05). After finding the countries that do, levene’s test was performed to check for equal variances:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="working-with-relational-databases.html#cb56-1" tabindex="-1"></a><span class="co">#find the countries where the data is a normal distribution</span></span>
<span id="cb56-2"><a href="working-with-relational-databases.html#cb56-2" tabindex="-1"></a>countries_normal_dengue <span class="ot">&lt;-</span> <span class="fu">subset</span>(dengue_gap_summary_country, pvalue_sw <span class="sc">&gt;</span> <span class="fl">0.05</span>)[,<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb56-3"><a href="working-with-relational-databases.html#cb56-3" tabindex="-1"></a>countries_normal_flu <span class="ot">&lt;-</span> <span class="fu">subset</span>(flu_gap_summary_country, pvalue_sw <span class="sc">&gt;</span> <span class="fl">0.05</span>)[,<span class="dv">1</span>] <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb56-4"><a href="working-with-relational-databases.html#cb56-4" tabindex="-1"></a></span>
<span id="cb56-5"><a href="working-with-relational-databases.html#cb56-5" tabindex="-1"></a><span class="co">#filter for the rows with observations from those countries</span></span>
<span id="cb56-6"><a href="working-with-relational-databases.html#cb56-6" tabindex="-1"></a>dengue_normal <span class="ot">&lt;-</span> dengue_gapminder_normalized[dengue_gapminder_normalized<span class="sc">$</span>country <span class="sc">%in%</span> countries_normal_dengue,]</span>
<span id="cb56-7"><a href="working-with-relational-databases.html#cb56-7" tabindex="-1"></a>flu_normal <span class="ot">&lt;-</span> flu_gapminder_normalized[flu_gapminder_normalized<span class="sc">$</span>country <span class="sc">%in%</span> countries_normal_flu,]</span>
<span id="cb56-8"><a href="working-with-relational-databases.html#cb56-8" tabindex="-1"></a></span>
<span id="cb56-9"><a href="working-with-relational-databases.html#cb56-9" tabindex="-1"></a><span class="co">#perform levene&#39;s test</span></span>
<span id="cb56-10"><a href="working-with-relational-databases.html#cb56-10" tabindex="-1"></a><span class="fu">leveneTest</span>(total_cases_dengue <span class="sc">~</span> country, <span class="at">data =</span> dengue_normal, <span class="at">center =</span> mean)[<span class="dv">1</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 0.1828471</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="working-with-relational-databases.html#cb58-1" tabindex="-1"></a><span class="fu">leveneTest</span>(total_cases_flu <span class="sc">~</span> country, <span class="at">data =</span> flu_normal, <span class="at">center =</span> mean)[<span class="dv">1</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 5.411843e-33</code></pre>
</div>
<div id="visualizing-correlation" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Visualizing correlation</h3>
<p>After calculating these p-values, I realized I’m more interested in correlation than difference between the groups, since it’s already known the groups are differt from each other (different countries). Instead of performing an ANOVA or Kruskal-Wallis test, it was decided that the pearson’s correlation coefficient would be calculated. A scatter plot was generated to visualize correlation:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="working-with-relational-databases.html#cb60-1" tabindex="-1"></a><span class="co">#perform a pearson correlation analysis </span></span>
<span id="cb60-2"><a href="working-with-relational-databases.html#cb60-2" tabindex="-1"></a>dengue_flu_cor <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor.test</span>(flu_gapminder_dengue_normalized<span class="sc">$</span>total_cases_dengue, </span>
<span id="cb60-3"><a href="working-with-relational-databases.html#cb60-3" tabindex="-1"></a>                                 flu_gapminder_dengue_normalized<span class="sc">$</span>total_cases_flu, </span>
<span id="cb60-4"><a href="working-with-relational-databases.html#cb60-4" tabindex="-1"></a>                                 <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)<span class="sc">$</span>estimate, <span class="dv">3</span>)</span>
<span id="cb60-5"><a href="working-with-relational-databases.html#cb60-5" tabindex="-1"></a></span>
<span id="cb60-6"><a href="working-with-relational-databases.html#cb60-6" tabindex="-1"></a>cor_pvalue <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(flu_gapminder_dengue_normalized<span class="sc">$</span>total_cases_dengue, </span>
<span id="cb60-7"><a href="working-with-relational-databases.html#cb60-7" tabindex="-1"></a>         flu_gapminder_dengue_normalized<span class="sc">$</span>total_cases_flu, </span>
<span id="cb60-8"><a href="working-with-relational-databases.html#cb60-8" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)<span class="sc">$</span>p.value</span>
<span id="cb60-9"><a href="working-with-relational-databases.html#cb60-9" tabindex="-1"></a></span>
<span id="cb60-10"><a href="working-with-relational-databases.html#cb60-10" tabindex="-1"></a><span class="co">#visualize the correlation in a scatter plot</span></span>
<span id="cb60-11"><a href="working-with-relational-databases.html#cb60-11" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> flu_gapminder_dengue_normalized, <span class="fu">aes</span>(<span class="at">y =</span> total_cases_dengue, <span class="at">x =</span> total_cases_flu)) <span class="sc">+</span></span>
<span id="cb60-12"><a href="working-with-relational-databases.html#cb60-12" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb60-13"><a href="working-with-relational-databases.html#cb60-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Relation between dengue and flu cases&quot;</span>,</span>
<span id="cb60-14"><a href="working-with-relational-databases.html#cb60-14" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;pearson&#39;s r = &quot;</span>, dengue_flu_cor),</span>
<span id="cb60-15"><a href="working-with-relational-databases.html#cb60-15" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of dengue cases&quot;</span>,</span>
<span id="cb60-16"><a href="working-with-relational-databases.html#cb60-16" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Number of flu cases&quot;</span>)<span class="sc">+</span></span>
<span id="cb60-17"><a href="working-with-relational-databases.html#cb60-17" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:pearsoncorrelationanalysis"></span>
<img src="portfolio_book_files/figure-html/pearsoncorrelationanalysis-1.png" alt="Scatter plot showing the correlation between the number of dengue and flu cases, with on the y-axis the number of dengue cases and on the x-axis the number of flu cases. Each dot represents a year of observations from one country." width="672" />
<p class="caption">
Figure 5.1: Scatter plot showing the correlation between the number of dengue and flu cases, with on the y-axis the number of dengue cases and on the x-axis the number of flu cases. Each dot represents a year of observations from one country.
</p>
</div>
<p>There is a significant correlation between the number of dengue and flu cases in a country, as p is smaller than 0.05 at <code>cor_pvalue</code>. The correlation coefficient of <code>dengue_flu_cor</code> indicates a weak correlation <span class="citation">(<a href="#ref-taylorInterpretationCorrelationCoefficient1990">Taylor 1990</a>)</span>.</p>
</div>
<div id="visualizing-the-dengue-data" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Visualizing the dengue data</h3>
<p>Dengue is endemic in most tropical countries / regions <span class="citation">(<a href="#ref-gublerGlobalEmergenceResurgence2002a">Gubler 2002</a>)</span>, as shown below:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="working-with-relational-databases.html#cb61-1" tabindex="-1"></a><span class="co">#visualize the number of dengue cases per region in a bar plot</span></span>
<span id="cb61-2"><a href="working-with-relational-databases.html#cb61-2" tabindex="-1"></a><span class="fu">ggplot</span>(dengue_gap_summary,</span>
<span id="cb61-3"><a href="working-with-relational-databases.html#cb61-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> mean,</span>
<span id="cb61-4"><a href="working-with-relational-databases.html#cb61-4" tabindex="-1"></a>           <span class="at">fill =</span> region))<span class="sc">+</span> </span>
<span id="cb61-5"><a href="working-with-relational-databases.html#cb61-5" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span> </span>
<span id="cb61-6"><a href="working-with-relational-databases.html#cb61-6" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean<span class="sc">-</span>sd, <span class="at">ymax =</span> mean<span class="sc">+</span>sd, <span class="at">width =</span> <span class="fl">0.2</span>))<span class="sc">+</span></span>
<span id="cb61-7"><a href="working-with-relational-databases.html#cb61-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of dengue cases per region&quot;</span>, </span>
<span id="cb61-8"><a href="working-with-relational-databases.html#cb61-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Error bars depict 1 standard deviation&quot;</span>,</span>
<span id="cb61-9"><a href="working-with-relational-databases.html#cb61-9" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Region&quot;</span>, </span>
<span id="cb61-10"><a href="working-with-relational-databases.html#cb61-10" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Average number of dengue cases&quot;</span>)<span class="sc">+</span></span>
<span id="cb61-11"><a href="working-with-relational-databases.html#cb61-11" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb61-12"><a href="working-with-relational-databases.html#cb61-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:denguebarplot"></span>
<img src="portfolio_book_files/figure-html/denguebarplot-1.png" alt="Bar plot showing the number of dengue cases per region, with on the y-axis the yearly average number of dengue cases." width="672" />
<p class="caption">
Figure 5.2: Bar plot showing the number of dengue cases per region, with on the y-axis the yearly average number of dengue cases.
</p>
</div>
<p>This graph was made by looking at the average number of cases per region per year, meaning it uses the total number of cases rather that the normalized ones that were calculated earlier. A more representative plot would use these numbers:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="working-with-relational-databases.html#cb62-1" tabindex="-1"></a><span class="co">#create a scatter plot of the dengue data</span></span>
<span id="cb62-2"><a href="working-with-relational-databases.html#cb62-2" tabindex="-1"></a>dengue_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dengue_gapminder_normalized,</span>
<span id="cb62-3"><a href="working-with-relational-databases.html#cb62-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mean_weekly_dengue, <span class="at">group =</span> country,</span>
<span id="cb62-4"><a href="working-with-relational-databases.html#cb62-4" tabindex="-1"></a>           <span class="at">color =</span> country))<span class="sc">+</span> </span>
<span id="cb62-5"><a href="working-with-relational-databases.html#cb62-5" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb62-6"><a href="working-with-relational-databases.html#cb62-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb62-7"><a href="working-with-relational-databases.html#cb62-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Weekly dengue cases per country&quot;</span>,</span>
<span id="cb62-8"><a href="working-with-relational-databases.html#cb62-8" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Average number of dengue cases per week</span><span class="sc">\n</span><span class="st">per 100,000 population&quot;</span>,</span>
<span id="cb62-9"><a href="working-with-relational-databases.html#cb62-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb62-10"><a href="working-with-relational-databases.html#cb62-10" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Country&quot;</span>)<span class="sc">+</span></span>
<span id="cb62-11"><a href="working-with-relational-databases.html#cb62-11" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">min</span>(dengue_gapminder_normalized<span class="sc">$</span>year),</span>
<span id="cb62-12"><a href="working-with-relational-databases.html#cb62-12" tabindex="-1"></a>                              <span class="at">to =</span> <span class="fu">max</span>(dengue_gapminder_normalized<span class="sc">$</span>year),</span>
<span id="cb62-13"><a href="working-with-relational-databases.html#cb62-13" tabindex="-1"></a>                              <span class="at">by =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb62-14"><a href="working-with-relational-databases.html#cb62-14" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb62-15"><a href="working-with-relational-databases.html#cb62-15" tabindex="-1"></a></span>
<span id="cb62-16"><a href="working-with-relational-databases.html#cb62-16" tabindex="-1"></a><span class="fu">ggplotly</span>(dengue_plot) <span class="co">#visualize the number of dengue cases per country in an interactive scatter plot</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:denguescatterplot"></span>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2196a107f52f3b5569d2" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-2196a107f52f3b5569d2">{"x":{"data":[{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[30.3695652173913,29.4807692307692,19.9038461538462,19,107.096153846154,28.1153846153846,321.903846153846,127.326923076923,61.2692307692308,39.2830188679245,81.9807692307692,53.2115384615385,66.1875],"text":["year: 2003<br />mean_weekly_dengue:  30.36957<br />country: Argentina<br />country: Argentina","year: 2004<br />mean_weekly_dengue:  29.48077<br />country: Argentina<br />country: Argentina","year: 2005<br />mean_weekly_dengue:  19.90385<br />country: Argentina<br />country: Argentina","year: 2006<br />mean_weekly_dengue:  19.00000<br />country: Argentina<br />country: Argentina","year: 2007<br />mean_weekly_dengue: 107.09615<br />country: Argentina<br />country: Argentina","year: 2008<br />mean_weekly_dengue:  28.11538<br />country: Argentina<br />country: Argentina","year: 2009<br />mean_weekly_dengue: 321.90385<br />country: Argentina<br />country: Argentina","year: 2010<br />mean_weekly_dengue: 127.32692<br />country: Argentina<br />country: Argentina","year: 2011<br />mean_weekly_dengue:  61.26923<br />country: Argentina<br />country: Argentina","year: 2012<br />mean_weekly_dengue:  39.28302<br />country: Argentina<br />country: Argentina","year: 2013<br />mean_weekly_dengue:  81.98077<br />country: Argentina<br />country: Argentina","year: 2014<br />mean_weekly_dengue:  53.21154<br />country: Argentina<br />country: Argentina","year: 2015<br />mean_weekly_dengue:  66.18750<br />country: Argentina<br />country: Argentina"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"Argentina","legendgroup":"Argentina","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[101,75.8653846153846,28.1730769230769,28.5576923076923,20.1509433962264,50.1730769230769,28.7115384615385,199.269230769231,25.6730769230769,41.7884615384615,28.5471698113208,10.8461538461538,17.5,13.34375],"text":["year: 2002<br />mean_weekly_dengue: 101.00000<br />country: Bolivia<br />country: Bolivia","year: 2003<br />mean_weekly_dengue:  75.86538<br />country: Bolivia<br />country: Bolivia","year: 2004<br />mean_weekly_dengue:  28.17308<br />country: Bolivia<br />country: Bolivia","year: 2005<br />mean_weekly_dengue:  28.55769<br />country: Bolivia<br />country: Bolivia","year: 2006<br />mean_weekly_dengue:  20.15094<br />country: Bolivia<br />country: Bolivia","year: 2007<br />mean_weekly_dengue:  50.17308<br />country: Bolivia<br />country: Bolivia","year: 2008<br />mean_weekly_dengue:  28.71154<br />country: Bolivia<br />country: Bolivia","year: 2009<br />mean_weekly_dengue: 199.26923<br />country: Bolivia<br />country: Bolivia","year: 2010<br />mean_weekly_dengue:  25.67308<br />country: Bolivia<br />country: Bolivia","year: 2011<br />mean_weekly_dengue:  41.78846<br />country: Bolivia<br />country: Bolivia","year: 2012<br />mean_weekly_dengue:  28.54717<br />country: Bolivia<br />country: Bolivia","year: 2013<br />mean_weekly_dengue:  10.84615<br />country: Bolivia<br />country: Bolivia","year: 2014<br />mean_weekly_dengue:  17.50000<br />country: Bolivia<br />country: Bolivia","year: 2015<br />mean_weekly_dengue:  13.34375<br />country: Bolivia<br />country: Bolivia"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(216,144,0,1)","dash":"solid"},"hoveron":"points","name":"Bolivia","legendgroup":"Bolivia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(216,144,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(216,144,0,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[73,83.5384615384615,45.7692307692308,51.6923076923077,87.6981132075472,152.75,185.634615384615,157.903846153846,240.846153846154,169.365384615385,104.415094339623,159.807692307692,131.115384615385,365.78125],"text":["year: 2002<br />mean_weekly_dengue:  73.00000<br />country: Brazil<br />country: Brazil","year: 2003<br />mean_weekly_dengue:  83.53846<br />country: Brazil<br />country: Brazil","year: 2004<br />mean_weekly_dengue:  45.76923<br />country: Brazil<br />country: Brazil","year: 2005<br />mean_weekly_dengue:  51.69231<br />country: Brazil<br />country: Brazil","year: 2006<br />mean_weekly_dengue:  87.69811<br />country: Brazil<br />country: Brazil","year: 2007<br />mean_weekly_dengue: 152.75000<br />country: Brazil<br />country: Brazil","year: 2008<br />mean_weekly_dengue: 185.63462<br />country: Brazil<br />country: Brazil","year: 2009<br />mean_weekly_dengue: 157.90385<br />country: Brazil<br />country: Brazil","year: 2010<br />mean_weekly_dengue: 240.84615<br />country: Brazil<br />country: Brazil","year: 2011<br />mean_weekly_dengue: 169.36538<br />country: Brazil<br />country: Brazil","year: 2012<br />mean_weekly_dengue: 104.41509<br />country: Brazil<br />country: Brazil","year: 2013<br />mean_weekly_dengue: 159.80769<br />country: Brazil<br />country: Brazil","year: 2014<br />mean_weekly_dengue: 131.11538<br />country: Brazil<br />country: Brazil","year: 2015<br />mean_weekly_dengue: 365.78125<br />country: Brazil<br />country: Brazil"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"Brazil","legendgroup":"Brazil","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[62,170.307692307692,71.9615384615385,109.057692307692,165.924528301887,88.2884615384615,85.5961538461538,87.4807692307692,180.653846153846,60.8269230769231,158.509433962264,161.730769230769,96.5961538461538,55.6875],"text":["year: 2002<br />mean_weekly_dengue:  62.00000<br />country: India<br />country: India","year: 2003<br />mean_weekly_dengue: 170.30769<br />country: India<br />country: India","year: 2004<br />mean_weekly_dengue:  71.96154<br />country: India<br />country: India","year: 2005<br />mean_weekly_dengue: 109.05769<br />country: India<br />country: India","year: 2006<br />mean_weekly_dengue: 165.92453<br />country: India<br />country: India","year: 2007<br />mean_weekly_dengue:  88.28846<br />country: India<br />country: India","year: 2008<br />mean_weekly_dengue:  85.59615<br />country: India<br />country: India","year: 2009<br />mean_weekly_dengue:  87.48077<br />country: India<br />country: India","year: 2010<br />mean_weekly_dengue: 180.65385<br />country: India<br />country: India","year: 2011<br />mean_weekly_dengue:  60.82692<br />country: India<br />country: India","year: 2012<br />mean_weekly_dengue: 158.50943<br />country: India<br />country: India","year: 2013<br />mean_weekly_dengue: 161.73077<br />country: India<br />country: India","year: 2014<br />mean_weekly_dengue:  96.59615<br />country: India<br />country: India","year: 2015<br />mean_weekly_dengue:  55.68750<br />country: India<br />country: India"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(57,182,0,1)","dash":"solid"},"hoveron":"points","name":"India","legendgroup":"India","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(57,182,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(57,182,0,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[101,60.5192307692308,160.692307692308,176.519230769231,203.905660377358,287.961538461538,205.865384615385,177.461538461538,139.134615384615,99.4807692307692,94.4905660377358,95.4807692307692,92.2115384615385,107.84375],"text":["year: 2002<br />mean_weekly_dengue: 101.00000<br />country: Indonesia<br />country: Indonesia","year: 2003<br />mean_weekly_dengue:  60.51923<br />country: Indonesia<br />country: Indonesia","year: 2004<br />mean_weekly_dengue: 160.69231<br />country: Indonesia<br />country: Indonesia","year: 2005<br />mean_weekly_dengue: 176.51923<br />country: Indonesia<br />country: Indonesia","year: 2006<br />mean_weekly_dengue: 203.90566<br />country: Indonesia<br />country: Indonesia","year: 2007<br />mean_weekly_dengue: 287.96154<br />country: Indonesia<br />country: Indonesia","year: 2008<br />mean_weekly_dengue: 205.86538<br />country: Indonesia<br />country: Indonesia","year: 2009<br />mean_weekly_dengue: 177.46154<br />country: Indonesia<br />country: Indonesia","year: 2010<br />mean_weekly_dengue: 139.13462<br />country: Indonesia<br />country: Indonesia","year: 2011<br />mean_weekly_dengue:  99.48077<br />country: Indonesia<br />country: Indonesia","year: 2012<br />mean_weekly_dengue:  94.49057<br />country: Indonesia<br />country: Indonesia","year: 2013<br />mean_weekly_dengue:  95.48077<br />country: Indonesia<br />country: Indonesia","year: 2014<br />mean_weekly_dengue:  92.21154<br />country: Indonesia<br />country: Indonesia","year: 2015<br />mean_weekly_dengue: 107.84375<br />country: Indonesia<br />country: Indonesia"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"Indonesia","legendgroup":"Indonesia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[86.5490196078431,73.6923076923077,90.4615384615385,91.2830188679245,147.461538461538,114.346153846154,273.615384615385,150.923076923077,88.8461538461538,153.301886792453,228.5,193.403846153846,150.84375],"text":["year: 2003<br />mean_weekly_dengue:  86.54902<br />country: Mexico<br />country: Mexico","year: 2004<br />mean_weekly_dengue:  73.69231<br />country: Mexico<br />country: Mexico","year: 2005<br />mean_weekly_dengue:  90.46154<br />country: Mexico<br />country: Mexico","year: 2006<br />mean_weekly_dengue:  91.28302<br />country: Mexico<br />country: Mexico","year: 2007<br />mean_weekly_dengue: 147.46154<br />country: Mexico<br />country: Mexico","year: 2008<br />mean_weekly_dengue: 114.34615<br />country: Mexico<br />country: Mexico","year: 2009<br />mean_weekly_dengue: 273.61538<br />country: Mexico<br />country: Mexico","year: 2010<br />mean_weekly_dengue: 150.92308<br />country: Mexico<br />country: Mexico","year: 2011<br />mean_weekly_dengue:  88.84615<br />country: Mexico<br />country: Mexico","year: 2012<br />mean_weekly_dengue: 153.30189<br />country: Mexico<br />country: Mexico","year: 2013<br />mean_weekly_dengue: 228.50000<br />country: Mexico<br />country: Mexico","year: 2014<br />mean_weekly_dengue: 193.40385<br />country: Mexico<br />country: Mexico","year: 2015<br />mean_weekly_dengue: 150.84375<br />country: Mexico<br />country: Mexico"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"Mexico","legendgroup":"Mexico","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[89.05,87.8846153846154,124.769230769231,138.641509433962,134.557692307692,107.884615384615,136.115384615385,278.173076923077,190.5,166.283018867925,133.230769230769,78.8076923076923,70.09375],"text":["year: 2003<br />mean_weekly_dengue:  89.05000<br />country: Philippines<br />country: Philippines","year: 2004<br />mean_weekly_dengue:  87.88462<br />country: Philippines<br />country: Philippines","year: 2005<br />mean_weekly_dengue: 124.76923<br />country: Philippines<br />country: Philippines","year: 2006<br />mean_weekly_dengue: 138.64151<br />country: Philippines<br />country: Philippines","year: 2007<br />mean_weekly_dengue: 134.55769<br />country: Philippines<br />country: Philippines","year: 2008<br />mean_weekly_dengue: 107.88462<br />country: Philippines<br />country: Philippines","year: 2009<br />mean_weekly_dengue: 136.11538<br />country: Philippines<br />country: Philippines","year: 2010<br />mean_weekly_dengue: 278.17308<br />country: Philippines<br />country: Philippines","year: 2011<br />mean_weekly_dengue: 190.50000<br />country: Philippines<br />country: Philippines","year: 2012<br />mean_weekly_dengue: 166.28302<br />country: Philippines<br />country: Philippines","year: 2013<br />mean_weekly_dengue: 133.23077<br />country: Philippines<br />country: Philippines","year: 2014<br />mean_weekly_dengue:  78.80769<br />country: Philippines<br />country: Philippines","year: 2015<br />mean_weekly_dengue:  70.09375<br />country: Philippines<br />country: Philippines"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"Philippines","legendgroup":"Philippines","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[59,131.807692307692,160.884615384615,273.461538461538,125.452830188679,184.288461538462,120.153846153846,104.673076923077,106.576923076923,108.403846153846,114.754716981132,190.019230769231,128.153846153846,109.96875],"text":["year: 2002<br />mean_weekly_dengue:  59.00000<br />country: Singapore<br />country: Singapore","year: 2003<br />mean_weekly_dengue: 131.80769<br />country: Singapore<br />country: Singapore","year: 2004<br />mean_weekly_dengue: 160.88462<br />country: Singapore<br />country: Singapore","year: 2005<br />mean_weekly_dengue: 273.46154<br />country: Singapore<br />country: Singapore","year: 2006<br />mean_weekly_dengue: 125.45283<br />country: Singapore<br />country: Singapore","year: 2007<br />mean_weekly_dengue: 184.28846<br />country: Singapore<br />country: Singapore","year: 2008<br />mean_weekly_dengue: 120.15385<br />country: Singapore<br />country: Singapore","year: 2009<br />mean_weekly_dengue: 104.67308<br />country: Singapore<br />country: Singapore","year: 2010<br />mean_weekly_dengue: 106.57692<br />country: Singapore<br />country: Singapore","year: 2011<br />mean_weekly_dengue: 108.40385<br />country: Singapore<br />country: Singapore","year: 2012<br />mean_weekly_dengue: 114.75472<br />country: Singapore<br />country: Singapore","year: 2013<br />mean_weekly_dengue: 190.01923<br />country: Singapore<br />country: Singapore","year: 2014<br />mean_weekly_dengue: 128.15385<br />country: Singapore<br />country: Singapore","year: 2015<br />mean_weekly_dengue: 109.96875<br />country: Singapore<br />country: Singapore"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(149,144,255,1)","dash":"solid"},"hoveron":"points","name":"Singapore","legendgroup":"Singapore","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(149,144,255,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(149,144,255,1)"}},"frame":null},{"x":[2008,2009,2010,2011,2012,2013,2014,2015],"y":[119.4375,123.057692307692,199.634615384615,135.942307692308,170.452830188679,331.769230769231,160.596153846154,198.875],"text":["year: 2008<br />mean_weekly_dengue: 119.43750<br />country: Thailand<br />country: Thailand","year: 2009<br />mean_weekly_dengue: 123.05769<br />country: Thailand<br />country: Thailand","year: 2010<br />mean_weekly_dengue: 199.63462<br />country: Thailand<br />country: Thailand","year: 2011<br />mean_weekly_dengue: 135.94231<br />country: Thailand<br />country: Thailand","year: 2012<br />mean_weekly_dengue: 170.45283<br />country: Thailand<br />country: Thailand","year: 2013<br />mean_weekly_dengue: 331.76923<br />country: Thailand<br />country: Thailand","year: 2014<br />mean_weekly_dengue: 160.59615<br />country: Thailand<br />country: Thailand","year: 2015<br />mean_weekly_dengue: 198.87500<br />country: Thailand<br />country: Thailand"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"Thailand","legendgroup":"Thailand","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[194.934782608696,192.211538461538,198.192307692308,182.169811320755,293.480769230769,300.961538461538,303.442307692308,535.519230769231,230.25,219.490566037736,302.807692307692,438.730769230769,164.59375],"text":["year: 2003<br />mean_weekly_dengue: 194.93478<br />country: Venezuela<br />country: Venezuela","year: 2004<br />mean_weekly_dengue: 192.21154<br />country: Venezuela<br />country: Venezuela","year: 2005<br />mean_weekly_dengue: 198.19231<br />country: Venezuela<br />country: Venezuela","year: 2006<br />mean_weekly_dengue: 182.16981<br />country: Venezuela<br />country: Venezuela","year: 2007<br />mean_weekly_dengue: 293.48077<br />country: Venezuela<br />country: Venezuela","year: 2008<br />mean_weekly_dengue: 300.96154<br />country: Venezuela<br />country: Venezuela","year: 2009<br />mean_weekly_dengue: 303.44231<br />country: Venezuela<br />country: Venezuela","year: 2010<br />mean_weekly_dengue: 535.51923<br />country: Venezuela<br />country: Venezuela","year: 2011<br />mean_weekly_dengue: 230.25000<br />country: Venezuela<br />country: Venezuela","year: 2012<br />mean_weekly_dengue: 219.49057<br />country: Venezuela<br />country: Venezuela","year: 2013<br />mean_weekly_dengue: 302.80769<br />country: Venezuela<br />country: Venezuela","year: 2014<br />mean_weekly_dengue: 438.73077<br />country: Venezuela<br />country: Venezuela","year: 2015<br />mean_weekly_dengue: 164.59375<br />country: Venezuela<br />country: Venezuela"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(255,98,188,1)","dash":"solid"},"hoveron":"points","name":"Venezuela","legendgroup":"Venezuela","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,98,188,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,98,188,1)"}},"frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Weekly dengue cases per country","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2001.35,2015.65],"tickmode":"array","ticktext":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"],"tickvals":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"categoryorder":"array","categoryarray":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-15.3875,561.752884615385],"tickmode":"array","ticktext":["0","200","400"],"tickvals":[0,200,400],"categoryorder":"array","categoryarray":["0","200","400"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Average number of dengue cases per week<br />per 100,000 population","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"ec48364ebfe4":{"x":{},"y":{},"colour":{},"type":"scatter"},"ec486c182d96":{"x":{},"y":{},"colour":{}}},"cur_data":"ec48364ebfe4","visdat":{"ec48364ebfe4":["function (y) ","x"],"ec486c182d96":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 5.3: Interactive scatter plot showing the normalized number of dengue cases per country, with on the y-axis the average number of dengue cases per week per 100,000 population and on the x-axis the year.
</p>
</div>
</div>
<div id="visualizing-the-flu-data" class="section level3" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Visualizing the flu data</h3>
<p>The same graphs can be made using the flu data:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="working-with-relational-databases.html#cb63-1" tabindex="-1"></a><span class="co">#visualize the number of flu cases per region in a bar plot</span></span>
<span id="cb63-2"><a href="working-with-relational-databases.html#cb63-2" tabindex="-1"></a><span class="fu">ggplot</span>(flu_gap_summary,</span>
<span id="cb63-3"><a href="working-with-relational-databases.html#cb63-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> mean,</span>
<span id="cb63-4"><a href="working-with-relational-databases.html#cb63-4" tabindex="-1"></a>           <span class="at">fill =</span> region)) <span class="sc">+</span> </span>
<span id="cb63-5"><a href="working-with-relational-databases.html#cb63-5" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span> </span>
<span id="cb63-6"><a href="working-with-relational-databases.html#cb63-6" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean<span class="sc">-</span>sd, <span class="at">ymax =</span> mean<span class="sc">+</span>sd, <span class="at">width =</span> <span class="fl">0.2</span>))<span class="sc">+</span></span>
<span id="cb63-7"><a href="working-with-relational-databases.html#cb63-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of flu cases per region&quot;</span>, </span>
<span id="cb63-8"><a href="working-with-relational-databases.html#cb63-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Error bars depict 1 standard deviation&quot;</span>,</span>
<span id="cb63-9"><a href="working-with-relational-databases.html#cb63-9" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Region&quot;</span>, </span>
<span id="cb63-10"><a href="working-with-relational-databases.html#cb63-10" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Average number of flu cases&quot;</span>)<span class="sc">+</span></span>
<span id="cb63-11"><a href="working-with-relational-databases.html#cb63-11" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb63-12"><a href="working-with-relational-databases.html#cb63-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb63-13"><a href="working-with-relational-databases.html#cb63-13" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:flubarplot"></span>
<img src="portfolio_book_files/figure-html/flubarplot-1.png" alt="Bar plot showing the number of flu cases per region, with on the y-axis the yearly average number of flu cases." width="672" />
<p class="caption">
Figure 5.4: Bar plot showing the number of flu cases per region, with on the y-axis the yearly average number of flu cases.
</p>
</div>
<p>This graph has the same issue as before, using the total number of cases rather than the normalized data. Northern America and Southern Africa stand out with their high number of cases. It is true that Northern America has a high number of weekly flu cases, but seeing their large population this was to be expected. More interesting is Southern Africa, where the population is smaller but the number of cases is higher. Looking at some random observations:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb64-1"><a href="working-with-relational-databases.html#cb64-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> country, region</span>
<span id="cb64-2"><a href="working-with-relational-databases.html#cb64-2" tabindex="-1"></a><span class="kw">FROM</span> flu_gapminder</span>
<span id="cb64-3"><a href="working-with-relational-databases.html#cb64-3" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;Southern Africa&#39;</span></span>
<span id="cb64-4"><a href="working-with-relational-databases.html#cb64-4" tabindex="-1"></a><span class="kw">AND</span> total_cases_flu <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-15">Table 5.14: </span>1 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
</tr>
</tbody>
</table>
</div>
<p>South Africa is the only country in region Southern Africa with flu data.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb65-1"><a href="working-with-relational-databases.html#cb65-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">year</span>, country, cases</span>
<span id="cb65-2"><a href="working-with-relational-databases.html#cb65-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu</span>
<span id="cb65-3"><a href="working-with-relational-databases.html#cb65-3" tabindex="-1"></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">&#39;South Africa&#39;</span></span>
<span id="cb65-4"><a href="working-with-relational-databases.html#cb65-4" tabindex="-1"></a>  <span class="kw">AND</span> cases <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb65-5"><a href="working-with-relational-databases.html#cb65-5" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="kw">RANDOM</span>();</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-16">Table 5.15: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">country</th>
<th align="right">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2010</td>
<td align="left">South Africa</td>
<td align="right">2350</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="left">South Africa</td>
<td align="right">3969</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="left">South Africa</td>
<td align="right">2515</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">South Africa</td>
<td align="right">4253</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="left">South Africa</td>
<td align="right">2792</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="left">South Africa</td>
<td align="right">2896</td>
</tr>
<tr class="odd">
<td align="right">2006</td>
<td align="left">South Africa</td>
<td align="right">3002</td>
</tr>
<tr class="even">
<td align="right">2011</td>
<td align="left">South Africa</td>
<td align="right">3143</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">South Africa</td>
<td align="right">1628</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="left">South Africa</td>
<td align="right">2677</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb66"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb66-1"><a href="working-with-relational-databases.html#cb66-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">year</span>, country, cases</span>
<span id="cb66-2"><a href="working-with-relational-databases.html#cb66-2" tabindex="-1"></a>  <span class="kw">FROM</span> flu</span>
<span id="cb66-3"><a href="working-with-relational-databases.html#cb66-3" tabindex="-1"></a><span class="kw">WHERE</span> cases <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb66-4"><a href="working-with-relational-databases.html#cb66-4" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="kw">RANDOM</span>();</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-17">Table 5.16: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">country</th>
<th align="right">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2006</td>
<td align="left">South Africa</td>
<td align="right">2312</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">Spain</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">Argentina</td>
<td align="right">238</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">Ukraine</td>
<td align="right">555</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">Canada</td>
<td align="right">570</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">Austria</td>
<td align="right">1060</td>
</tr>
<tr class="odd">
<td align="right">2012</td>
<td align="left">Russia</td>
<td align="right">452</td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="left">Switzerland</td>
<td align="right">91</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">Ukraine</td>
<td align="right">543</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Brazil</td>
<td align="right">250</td>
</tr>
</tbody>
</table>
</div>
<p>We can see that the number of weekly cases in South Africa is very high compared to other countries, causing it to stand out when looking at the bar graph. This will also be reflected in the average number of weekly cases:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="working-with-relational-databases.html#cb67-1" tabindex="-1"></a><span class="co">#create a scatter plot of the flu data</span></span>
<span id="cb67-2"><a href="working-with-relational-databases.html#cb67-2" tabindex="-1"></a>flu_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(flu_gapminder_normalized,</span>
<span id="cb67-3"><a href="working-with-relational-databases.html#cb67-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mean_weekly_flu, <span class="at">group =</span> country,</span>
<span id="cb67-4"><a href="working-with-relational-databases.html#cb67-4" tabindex="-1"></a>           <span class="at">color =</span> country))<span class="sc">+</span> </span>
<span id="cb67-5"><a href="working-with-relational-databases.html#cb67-5" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb67-6"><a href="working-with-relational-databases.html#cb67-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb67-7"><a href="working-with-relational-databases.html#cb67-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Weekly flu cases per country&quot;</span>,</span>
<span id="cb67-8"><a href="working-with-relational-databases.html#cb67-8" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Average number of flu cases per week</span><span class="sc">\n</span><span class="st">per 100,000 population&quot;</span>,</span>
<span id="cb67-9"><a href="working-with-relational-databases.html#cb67-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb67-10"><a href="working-with-relational-databases.html#cb67-10" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Country&quot;</span>)<span class="sc">+</span></span>
<span id="cb67-11"><a href="working-with-relational-databases.html#cb67-11" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">min</span>(flu_gapminder_normalized<span class="sc">$</span>year),</span>
<span id="cb67-12"><a href="working-with-relational-databases.html#cb67-12" tabindex="-1"></a>                                  <span class="at">to =</span> <span class="fu">max</span>(flu_gapminder_normalized<span class="sc">$</span>year),</span>
<span id="cb67-13"><a href="working-with-relational-databases.html#cb67-13" tabindex="-1"></a>                                  <span class="at">by =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb67-14"><a href="working-with-relational-databases.html#cb67-14" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb67-15"><a href="working-with-relational-databases.html#cb67-15" tabindex="-1"></a></span>
<span id="cb67-16"><a href="working-with-relational-databases.html#cb67-16" tabindex="-1"></a><span class="fu">ggplotly</span>(flu_plot) <span class="co">#visualize the number of flu cases per country in an interactive scatter plot</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:fluscatterplot"></span>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-45698d0f416749d1cc68" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-45698d0f416749d1cc68">{"x":{"data":[{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[194.833333333333,170.057692307692,165.903846153846,169.169811320755,197.442307692308,178.826923076923,152.923076923077,133.576923076923,106.557692307692,116.132075471698,125.557692307692,136.019230769231,151.28125],"text":["year: 2003<br />mean_weekly_flu:  194.833333<br />country: Argentina<br />country: Argentina","year: 2004<br />mean_weekly_flu:  170.057692<br />country: Argentina<br />country: Argentina","year: 2005<br />mean_weekly_flu:  165.903846<br />country: Argentina<br />country: Argentina","year: 2006<br />mean_weekly_flu:  169.169811<br />country: Argentina<br />country: Argentina","year: 2007<br />mean_weekly_flu:  197.442308<br />country: Argentina<br />country: Argentina","year: 2008<br />mean_weekly_flu:  178.826923<br />country: Argentina<br />country: Argentina","year: 2009<br />mean_weekly_flu:  152.923077<br />country: Argentina<br />country: Argentina","year: 2010<br />mean_weekly_flu:  133.576923<br />country: Argentina<br />country: Argentina","year: 2011<br />mean_weekly_flu:  106.557692<br />country: Argentina<br />country: Argentina","year: 2012<br />mean_weekly_flu:  116.132075<br />country: Argentina<br />country: Argentina","year: 2013<br />mean_weekly_flu:  125.557692<br />country: Argentina<br />country: Argentina","year: 2014<br />mean_weekly_flu:  136.019231<br />country: Argentina<br />country: Argentina","year: 2015<br />mean_weekly_flu:  151.281250<br />country: Argentina<br />country: Argentina"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"Argentina","legendgroup":"Argentina","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"frame":null},{"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[344.584905660377,568.730769230769,482.519230769231,438.384615384615,241.75,252.653846153846,517.962264150943,366.75,590.480769230769,636.09375],"text":["year: 2006<br />mean_weekly_flu:  344.584906<br />country: Australia<br />country: Australia","year: 2007<br />mean_weekly_flu:  568.730769<br />country: Australia<br />country: Australia","year: 2008<br />mean_weekly_flu:  482.519231<br />country: Australia<br />country: Australia","year: 2009<br />mean_weekly_flu:  438.384615<br />country: Australia<br />country: Australia","year: 2010<br />mean_weekly_flu:  241.750000<br />country: Australia<br />country: Australia","year: 2011<br />mean_weekly_flu:  252.653846<br />country: Australia<br />country: Australia","year: 2012<br />mean_weekly_flu:  517.962264<br />country: Australia<br />country: Australia","year: 2013<br />mean_weekly_flu:  366.750000<br />country: Australia<br />country: Australia","year: 2014<br />mean_weekly_flu:  590.480769<br />country: Australia<br />country: Australia","year: 2015<br />mean_weekly_flu:  636.093750<br />country: Australia<br />country: Australia"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(239,127,72,1)","dash":"solid"},"hoveron":"points","name":"Australia","legendgroup":"Australia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(239,127,72,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(239,127,72,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[727,631.153846153846,798.115384615385,681.924528301887,779.173076923077,828.173076923077,906.096153846154,615.538461538462,670.923076923077,756.377358490566,965.942307692308,992.980769230769,1254.46875],"text":["year: 2003<br />mean_weekly_flu:  727.000000<br />country: Austria<br />country: Austria","year: 2004<br />mean_weekly_flu:  631.153846<br />country: Austria<br />country: Austria","year: 2005<br />mean_weekly_flu:  798.115385<br />country: Austria<br />country: Austria","year: 2006<br />mean_weekly_flu:  681.924528<br />country: Austria<br />country: Austria","year: 2007<br />mean_weekly_flu:  779.173077<br />country: Austria<br />country: Austria","year: 2008<br />mean_weekly_flu:  828.173077<br />country: Austria<br />country: Austria","year: 2009<br />mean_weekly_flu:  906.096154<br />country: Austria<br />country: Austria","year: 2010<br />mean_weekly_flu:  615.538462<br />country: Austria<br />country: Austria","year: 2011<br />mean_weekly_flu:  670.923077<br />country: Austria<br />country: Austria","year: 2012<br />mean_weekly_flu:  756.377358<br />country: Austria<br />country: Austria","year: 2013<br />mean_weekly_flu:  965.942308<br />country: Austria<br />country: Austria","year: 2014<br />mean_weekly_flu:  992.980769<br />country: Austria<br />country: Austria","year: 2015<br />mean_weekly_flu: 1254.468750<br />country: Austria<br />country: Austria"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(228,136,0,1)","dash":"solid"},"hoveron":"points","name":"Austria","legendgroup":"Austria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(228,136,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(228,136,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[255.928571428571,55.3076923076923,124.461538461538,83.7924528301887,121.25,90.3076923076923,198.461538461538,52.5576923076923,86.0961538461538,89.7735849056604,185.038461538462,105.288461538462,347.21875],"text":["year: 2003<br />mean_weekly_flu:  255.928571<br />country: Belgium<br />country: Belgium","year: 2004<br />mean_weekly_flu:   55.307692<br />country: Belgium<br />country: Belgium","year: 2005<br />mean_weekly_flu:  124.461538<br />country: Belgium<br />country: Belgium","year: 2006<br />mean_weekly_flu:   83.792453<br />country: Belgium<br />country: Belgium","year: 2007<br />mean_weekly_flu:  121.250000<br />country: Belgium<br />country: Belgium","year: 2008<br />mean_weekly_flu:   90.307692<br />country: Belgium<br />country: Belgium","year: 2009<br />mean_weekly_flu:  198.461538<br />country: Belgium<br />country: Belgium","year: 2010<br />mean_weekly_flu:   52.557692<br />country: Belgium<br />country: Belgium","year: 2011<br />mean_weekly_flu:   86.096154<br />country: Belgium<br />country: Belgium","year: 2012<br />mean_weekly_flu:   89.773585<br />country: Belgium<br />country: Belgium","year: 2013<br />mean_weekly_flu:  185.038462<br />country: Belgium<br />country: Belgium","year: 2014<br />mean_weekly_flu:  105.288462<br />country: Belgium<br />country: Belgium","year: 2015<br />mean_weekly_flu:  347.218750<br />country: Belgium<br />country: Belgium"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(214,145,0,1)","dash":"solid"},"hoveron":"points","name":"Belgium","legendgroup":"Belgium","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(214,145,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(214,145,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[501.4,425.192307692308,389.615384615385,371.094339622641,371.384615384615,317.807692307692,279.153846153846,226,208.826923076923,189.339622641509,175.557692307692,174.326923076923,200.21875],"text":["year: 2003<br />mean_weekly_flu:  501.400000<br />country: Bolivia<br />country: Bolivia","year: 2004<br />mean_weekly_flu:  425.192308<br />country: Bolivia<br />country: Bolivia","year: 2005<br />mean_weekly_flu:  389.615385<br />country: Bolivia<br />country: Bolivia","year: 2006<br />mean_weekly_flu:  371.094340<br />country: Bolivia<br />country: Bolivia","year: 2007<br />mean_weekly_flu:  371.384615<br />country: Bolivia<br />country: Bolivia","year: 2008<br />mean_weekly_flu:  317.807692<br />country: Bolivia<br />country: Bolivia","year: 2009<br />mean_weekly_flu:  279.153846<br />country: Bolivia<br />country: Bolivia","year: 2010<br />mean_weekly_flu:  226.000000<br />country: Bolivia<br />country: Bolivia","year: 2011<br />mean_weekly_flu:  208.826923<br />country: Bolivia<br />country: Bolivia","year: 2012<br />mean_weekly_flu:  189.339623<br />country: Bolivia<br />country: Bolivia","year: 2013<br />mean_weekly_flu:  175.557692<br />country: Bolivia<br />country: Bolivia","year: 2014<br />mean_weekly_flu:  174.326923<br />country: Bolivia<br />country: Bolivia","year: 2015<br />mean_weekly_flu:  200.218750<br />country: Bolivia<br />country: Bolivia"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(198,153,0,1)","dash":"solid"},"hoveron":"points","name":"Bolivia","legendgroup":"Bolivia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(198,153,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(198,153,0,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[174,238.192307692308,249.307692307692,254.730769230769,263.471698113208,256.461538461538,243.019230769231,211.230769230769,172.5,160.480769230769,145,166.846153846154,170.288461538462,206.34375],"text":["year: 2002<br />mean_weekly_flu:  174.000000<br />country: Brazil<br />country: Brazil","year: 2003<br />mean_weekly_flu:  238.192308<br />country: Brazil<br />country: Brazil","year: 2004<br />mean_weekly_flu:  249.307692<br />country: Brazil<br />country: Brazil","year: 2005<br />mean_weekly_flu:  254.730769<br />country: Brazil<br />country: Brazil","year: 2006<br />mean_weekly_flu:  263.471698<br />country: Brazil<br />country: Brazil","year: 2007<br />mean_weekly_flu:  256.461538<br />country: Brazil<br />country: Brazil","year: 2008<br />mean_weekly_flu:  243.019231<br />country: Brazil<br />country: Brazil","year: 2009<br />mean_weekly_flu:  211.230769<br />country: Brazil<br />country: Brazil","year: 2010<br />mean_weekly_flu:  172.500000<br />country: Brazil<br />country: Brazil","year: 2011<br />mean_weekly_flu:  160.480769<br />country: Brazil<br />country: Brazil","year: 2012<br />mean_weekly_flu:  145.000000<br />country: Brazil<br />country: Brazil","year: 2013<br />mean_weekly_flu:  166.846154<br />country: Brazil<br />country: Brazil","year: 2014<br />mean_weekly_flu:  170.288462<br />country: Brazil<br />country: Brazil","year: 2015<br />mean_weekly_flu:  206.343750<br />country: Brazil<br />country: Brazil"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(180,160,0,1)","dash":"solid"},"hoveron":"points","name":"Brazil","legendgroup":"Brazil","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(180,160,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(180,160,0,1)"}},"frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[710,807.461538461538,880.905660377358,822.134615384615,676.730769230769,715.134615384615,457.711538461538,498.653846153846,307.339622641509,345.288461538462,487.423076923077,517.78125],"text":["year: 2004<br />mean_weekly_flu:  710.000000<br />country: Bulgaria<br />country: Bulgaria","year: 2005<br />mean_weekly_flu:  807.461538<br />country: Bulgaria<br />country: Bulgaria","year: 2006<br />mean_weekly_flu:  880.905660<br />country: Bulgaria<br />country: Bulgaria","year: 2007<br />mean_weekly_flu:  822.134615<br />country: Bulgaria<br />country: Bulgaria","year: 2008<br />mean_weekly_flu:  676.730769<br />country: Bulgaria<br />country: Bulgaria","year: 2009<br />mean_weekly_flu:  715.134615<br />country: Bulgaria<br />country: Bulgaria","year: 2010<br />mean_weekly_flu:  457.711538<br />country: Bulgaria<br />country: Bulgaria","year: 2011<br />mean_weekly_flu:  498.653846<br />country: Bulgaria<br />country: Bulgaria","year: 2012<br />mean_weekly_flu:  307.339623<br />country: Bulgaria<br />country: Bulgaria","year: 2013<br />mean_weekly_flu:  345.288462<br />country: Bulgaria<br />country: Bulgaria","year: 2014<br />mean_weekly_flu:  487.423077<br />country: Bulgaria<br />country: Bulgaria","year: 2015<br />mean_weekly_flu:  517.781250<br />country: Bulgaria<br />country: Bulgaria"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(158,167,0,1)","dash":"solid"},"hoveron":"points","name":"Bulgaria","legendgroup":"Bulgaria","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(158,167,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(158,167,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[3341.71428571429,1496.69230769231,1901.13461538462,1841.47169811321,1650.40384615385,1631.26923076923,2713.80769230769,1304.90384615385,1418.80769230769,1916.62264150943,2004.44230769231,2334.38461538462,2125.1875],"text":["year: 2003<br />mean_weekly_flu: 3341.714286<br />country: Canada<br />country: Canada","year: 2004<br />mean_weekly_flu: 1496.692308<br />country: Canada<br />country: Canada","year: 2005<br />mean_weekly_flu: 1901.134615<br />country: Canada<br />country: Canada","year: 2006<br />mean_weekly_flu: 1841.471698<br />country: Canada<br />country: Canada","year: 2007<br />mean_weekly_flu: 1650.403846<br />country: Canada<br />country: Canada","year: 2008<br />mean_weekly_flu: 1631.269231<br />country: Canada<br />country: Canada","year: 2009<br />mean_weekly_flu: 2713.807692<br />country: Canada<br />country: Canada","year: 2010<br />mean_weekly_flu: 1304.903846<br />country: Canada<br />country: Canada","year: 2011<br />mean_weekly_flu: 1418.807692<br />country: Canada<br />country: Canada","year: 2012<br />mean_weekly_flu: 1916.622642<br />country: Canada<br />country: Canada","year: 2013<br />mean_weekly_flu: 2004.442308<br />country: Canada<br />country: Canada","year: 2014<br />mean_weekly_flu: 2334.384615<br />country: Canada<br />country: Canada","year: 2015<br />mean_weekly_flu: 2125.187500<br />country: Canada<br />country: Canada"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(131,173,0,1)","dash":"solid"},"hoveron":"points","name":"Canada","legendgroup":"Canada","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(131,173,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(131,173,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[1.68627450980392,6.69230769230769,5.01923076923077,4.90566037735849,10.7307692307692,7.92307692307692,20.6538461538462,16.3076923076923,6.05769230769231,13.1320754716981,22.6923076923077,20.6730769230769,13.46875],"text":["year: 2003<br />mean_weekly_flu:    1.686275<br />country: Chile<br />country: Chile","year: 2004<br />mean_weekly_flu:    6.692308<br />country: Chile<br />country: Chile","year: 2005<br />mean_weekly_flu:    5.019231<br />country: Chile<br />country: Chile","year: 2006<br />mean_weekly_flu:    4.905660<br />country: Chile<br />country: Chile","year: 2007<br />mean_weekly_flu:   10.730769<br />country: Chile<br />country: Chile","year: 2008<br />mean_weekly_flu:    7.923077<br />country: Chile<br />country: Chile","year: 2009<br />mean_weekly_flu:   20.653846<br />country: Chile<br />country: Chile","year: 2010<br />mean_weekly_flu:   16.307692<br />country: Chile<br />country: Chile","year: 2011<br />mean_weekly_flu:    6.057692<br />country: Chile<br />country: Chile","year: 2012<br />mean_weekly_flu:   13.132075<br />country: Chile<br />country: Chile","year: 2013<br />mean_weekly_flu:   22.692308<br />country: Chile<br />country: Chile","year: 2014<br />mean_weekly_flu:   20.673077<br />country: Chile<br />country: Chile","year: 2015<br />mean_weekly_flu:   13.468750<br />country: Chile<br />country: Chile"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(96,178,0,1)","dash":"solid"},"hoveron":"points","name":"Chile","legendgroup":"Chile","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(96,178,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(96,178,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[313.571428571429,31.1923076923077,108.807692307692,58.0188679245283,80.8269230769231,93.3269230769231,154.653846153846,30.0769230769231,59.4038461538462,72.4528301886792,146.269230769231,56.2115384615385,336.25],"text":["year: 2003<br />mean_weekly_flu:  313.571429<br />country: France<br />country: France","year: 2004<br />mean_weekly_flu:   31.192308<br />country: France<br />country: France","year: 2005<br />mean_weekly_flu:  108.807692<br />country: France<br />country: France","year: 2006<br />mean_weekly_flu:   58.018868<br />country: France<br />country: France","year: 2007<br />mean_weekly_flu:   80.826923<br />country: France<br />country: France","year: 2008<br />mean_weekly_flu:   93.326923<br />country: France<br />country: France","year: 2009<br />mean_weekly_flu:  154.653846<br />country: France<br />country: France","year: 2010<br />mean_weekly_flu:   30.076923<br />country: France<br />country: France","year: 2011<br />mean_weekly_flu:   59.403846<br />country: France<br />country: France","year: 2012<br />mean_weekly_flu:   72.452830<br />country: France<br />country: France","year: 2013<br />mean_weekly_flu:  146.269231<br />country: France<br />country: France","year: 2014<br />mean_weekly_flu:   56.211538<br />country: France<br />country: France","year: 2015<br />mean_weekly_flu:  336.250000<br />country: France<br />country: France"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(25,183,0,1)","dash":"solid"},"hoveron":"points","name":"France","legendgroup":"France","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(25,183,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(25,183,0,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[1107.64285714286,824.615384615385,948.365384615385,791.547169811321,869.730769230769,838.115384615385,874.942307692308,653.846153846154,667.884615384615,678.754716981132,787.076923076923,731.326923076923,889.15625],"text":["year: 2003<br />mean_weekly_flu: 1107.642857<br />country: Germany<br />country: Germany","year: 2004<br />mean_weekly_flu:  824.615385<br />country: Germany<br />country: Germany","year: 2005<br />mean_weekly_flu:  948.365385<br />country: Germany<br />country: Germany","year: 2006<br />mean_weekly_flu:  791.547170<br />country: Germany<br />country: Germany","year: 2007<br />mean_weekly_flu:  869.730769<br />country: Germany<br />country: Germany","year: 2008<br />mean_weekly_flu:  838.115385<br />country: Germany<br />country: Germany","year: 2009<br />mean_weekly_flu:  874.942308<br />country: Germany<br />country: Germany","year: 2010<br />mean_weekly_flu:  653.846154<br />country: Germany<br />country: Germany","year: 2011<br />mean_weekly_flu:  667.884615<br />country: Germany<br />country: Germany","year: 2012<br />mean_weekly_flu:  678.754717<br />country: Germany<br />country: Germany","year: 2013<br />mean_weekly_flu:  787.076923<br />country: Germany<br />country: Germany","year: 2014<br />mean_weekly_flu:  731.326923<br />country: Germany<br />country: Germany","year: 2015<br />mean_weekly_flu:  889.156250<br />country: Germany<br />country: Germany"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,187,72,1)","dash":"solid"},"hoveron":"points","name":"Germany","legendgroup":"Germany","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,187,72,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,187,72,1)"}},"frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[51.2857142857143,85.9807692307692,62.1698113207547,83.5192307692308,104.423076923077,152.173076923077,52.9615384615385,79.9807692307692,66.6415094339623,81.2307692307692,76.8076923076923,190.5625],"text":["year: 2004<br />mean_weekly_flu:   51.285714<br />country: Hungary<br />country: Hungary","year: 2005<br />mean_weekly_flu:   85.980769<br />country: Hungary<br />country: Hungary","year: 2006<br />mean_weekly_flu:   62.169811<br />country: Hungary<br />country: Hungary","year: 2007<br />mean_weekly_flu:   83.519231<br />country: Hungary<br />country: Hungary","year: 2008<br />mean_weekly_flu:  104.423077<br />country: Hungary<br />country: Hungary","year: 2009<br />mean_weekly_flu:  152.173077<br />country: Hungary<br />country: Hungary","year: 2010<br />mean_weekly_flu:   52.961538<br />country: Hungary<br />country: Hungary","year: 2011<br />mean_weekly_flu:   79.980769<br />country: Hungary<br />country: Hungary","year: 2012<br />mean_weekly_flu:   66.641509<br />country: Hungary<br />country: Hungary","year: 2013<br />mean_weekly_flu:   81.230769<br />country: Hungary<br />country: Hungary","year: 2014<br />mean_weekly_flu:   76.807692<br />country: Hungary<br />country: Hungary","year: 2015<br />mean_weekly_flu:  190.562500<br />country: Hungary<br />country: Hungary"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,190,107,1)","dash":"solid"},"hoveron":"points","name":"Hungary","legendgroup":"Hungary","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,190,107,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,190,107,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[45.8,76.9423076923077,182.307692307692,111.77358490566,148.557692307692,92.2884615384615,405.019230769231,40.5,135.653846153846,297.339622641509,473.596153846154,649.307692307692,754.34375],"text":["year: 2003<br />mean_weekly_flu:   45.800000<br />country: Japan<br />country: Japan","year: 2004<br />mean_weekly_flu:   76.942308<br />country: Japan<br />country: Japan","year: 2005<br />mean_weekly_flu:  182.307692<br />country: Japan<br />country: Japan","year: 2006<br />mean_weekly_flu:  111.773585<br />country: Japan<br />country: Japan","year: 2007<br />mean_weekly_flu:  148.557692<br />country: Japan<br />country: Japan","year: 2008<br />mean_weekly_flu:   92.288462<br />country: Japan<br />country: Japan","year: 2009<br />mean_weekly_flu:  405.019231<br />country: Japan<br />country: Japan","year: 2010<br />mean_weekly_flu:   40.500000<br />country: Japan<br />country: Japan","year: 2011<br />mean_weekly_flu:  135.653846<br />country: Japan<br />country: Japan","year: 2012<br />mean_weekly_flu:  297.339623<br />country: Japan<br />country: Japan","year: 2013<br />mean_weekly_flu:  473.596154<br />country: Japan<br />country: Japan","year: 2014<br />mean_weekly_flu:  649.307692<br />country: Japan<br />country: Japan","year: 2015<br />mean_weekly_flu:  754.343750<br />country: Japan<br />country: Japan"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,192,136,1)","dash":"solid"},"hoveron":"points","name":"Japan","legendgroup":"Japan","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,192,136,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,192,136,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[945.214285714286,884.192307692308,980.980769230769,1067.33962264151,1364.98076923077,1164.88461538462,1135.57692307692,1144.30769230769,952.384615384615,1131.39622641509,1224.32692307692,1345.09615384615,1357.375],"text":["year: 2003<br />mean_weekly_flu:  945.214286<br />country: Mexico<br />country: Mexico","year: 2004<br />mean_weekly_flu:  884.192308<br />country: Mexico<br />country: Mexico","year: 2005<br />mean_weekly_flu:  980.980769<br />country: Mexico<br />country: Mexico","year: 2006<br />mean_weekly_flu: 1067.339623<br />country: Mexico<br />country: Mexico","year: 2007<br />mean_weekly_flu: 1364.980769<br />country: Mexico<br />country: Mexico","year: 2008<br />mean_weekly_flu: 1164.884615<br />country: Mexico<br />country: Mexico","year: 2009<br />mean_weekly_flu: 1135.576923<br />country: Mexico<br />country: Mexico","year: 2010<br />mean_weekly_flu: 1144.307692<br />country: Mexico<br />country: Mexico","year: 2011<br />mean_weekly_flu:  952.384615<br />country: Mexico<br />country: Mexico","year: 2012<br />mean_weekly_flu: 1131.396226<br />country: Mexico<br />country: Mexico","year: 2013<br />mean_weekly_flu: 1224.326923<br />country: Mexico<br />country: Mexico","year: 2014<br />mean_weekly_flu: 1345.096154<br />country: Mexico<br />country: Mexico","year: 2015<br />mean_weekly_flu: 1357.375000<br />country: Mexico<br />country: Mexico"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,193,162,1)","dash":"solid"},"hoveron":"points","name":"Mexico","legendgroup":"Mexico","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,193,162,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,193,162,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[60.4615384615385,19.5,34.2115384615385,28.2452830188679,30.9038461538462,34.6346153846154,58.8846153846154,22.0192307692308,31.2884615384615,38.1698113207547,52.3269230769231,32.3076923076923,52.0625],"text":["year: 2003<br />mean_weekly_flu:   60.461538<br />country: Netherlands<br />country: Netherlands","year: 2004<br />mean_weekly_flu:   19.500000<br />country: Netherlands<br />country: Netherlands","year: 2005<br />mean_weekly_flu:   34.211538<br />country: Netherlands<br />country: Netherlands","year: 2006<br />mean_weekly_flu:   28.245283<br />country: Netherlands<br />country: Netherlands","year: 2007<br />mean_weekly_flu:   30.903846<br />country: Netherlands<br />country: Netherlands","year: 2008<br />mean_weekly_flu:   34.634615<br />country: Netherlands<br />country: Netherlands","year: 2009<br />mean_weekly_flu:   58.884615<br />country: Netherlands<br />country: Netherlands","year: 2010<br />mean_weekly_flu:   22.019231<br />country: Netherlands<br />country: Netherlands","year: 2011<br />mean_weekly_flu:   31.288462<br />country: Netherlands<br />country: Netherlands","year: 2012<br />mean_weekly_flu:   38.169811<br />country: Netherlands<br />country: Netherlands","year: 2013<br />mean_weekly_flu:   52.326923<br />country: Netherlands<br />country: Netherlands","year: 2014<br />mean_weekly_flu:   32.307692<br />country: Netherlands<br />country: Netherlands","year: 2015<br />mean_weekly_flu:   52.062500<br />country: Netherlands<br />country: Netherlands"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,192,186,1)","dash":"solid"},"hoveron":"points","name":"Netherlands","legendgroup":"Netherlands","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,192,186,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,192,186,1)"}},"frame":null},{"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[28.1509433962264,26.8846153846154,36.2115384615385,50.8461538461538,33.5,32.1923076923077,44.7735849056604,43.4615384615385,63.8846153846154,25.21875],"text":["year: 2006<br />mean_weekly_flu:   28.150943<br />country: New Zealand<br />country: New Zealand","year: 2007<br />mean_weekly_flu:   26.884615<br />country: New Zealand<br />country: New Zealand","year: 2008<br />mean_weekly_flu:   36.211538<br />country: New Zealand<br />country: New Zealand","year: 2009<br />mean_weekly_flu:   50.846154<br />country: New Zealand<br />country: New Zealand","year: 2010<br />mean_weekly_flu:   33.500000<br />country: New Zealand<br />country: New Zealand","year: 2011<br />mean_weekly_flu:   32.192308<br />country: New Zealand<br />country: New Zealand","year: 2012<br />mean_weekly_flu:   44.773585<br />country: New Zealand<br />country: New Zealand","year: 2013<br />mean_weekly_flu:   43.461538<br />country: New Zealand<br />country: New Zealand","year: 2014<br />mean_weekly_flu:   63.884615<br />country: New Zealand<br />country: New Zealand","year: 2015<br />mean_weekly_flu:   25.218750<br />country: New Zealand<br />country: New Zealand"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,190,207,1)","dash":"solid"},"hoveron":"points","name":"New Zealand","legendgroup":"New Zealand","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,190,207,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,190,207,1)"}},"frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[12.7142857142857,36.6153846153846,27.811320754717,42.9038461538462,43.6730769230769,132.25,64.1923076923077,93.3076923076923,86.9056603773585,89.5,78.3076923076923,127.9375],"text":["year: 2004<br />mean_weekly_flu:   12.714286<br />country: Norway<br />country: Norway","year: 2005<br />mean_weekly_flu:   36.615385<br />country: Norway<br />country: Norway","year: 2006<br />mean_weekly_flu:   27.811321<br />country: Norway<br />country: Norway","year: 2007<br />mean_weekly_flu:   42.903846<br />country: Norway<br />country: Norway","year: 2008<br />mean_weekly_flu:   43.673077<br />country: Norway<br />country: Norway","year: 2009<br />mean_weekly_flu:  132.250000<br />country: Norway<br />country: Norway","year: 2010<br />mean_weekly_flu:   64.192308<br />country: Norway<br />country: Norway","year: 2011<br />mean_weekly_flu:   93.307692<br />country: Norway<br />country: Norway","year: 2012<br />mean_weekly_flu:   86.905660<br />country: Norway<br />country: Norway","year: 2013<br />mean_weekly_flu:   89.500000<br />country: Norway<br />country: Norway","year: 2014<br />mean_weekly_flu:   78.307692<br />country: Norway<br />country: Norway","year: 2015<br />mean_weekly_flu:  127.937500<br />country: Norway<br />country: Norway"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,185,225,1)","dash":"solid"},"hoveron":"points","name":"Norway","legendgroup":"Norway","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,185,225,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,185,225,1)"}},"frame":null},{"x":[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[328.8125,310.905660377359,314.788461538462,285,267.192307692308,192.634615384615,179.75,170,226.057692307692,254.653846153846,309.1875],"text":["year: 2005<br />mean_weekly_flu:  328.812500<br />country: Paraguay<br />country: Paraguay","year: 2006<br />mean_weekly_flu:  310.905660<br />country: Paraguay<br />country: Paraguay","year: 2007<br />mean_weekly_flu:  314.788462<br />country: Paraguay<br />country: Paraguay","year: 2008<br />mean_weekly_flu:  285.000000<br />country: Paraguay<br />country: Paraguay","year: 2009<br />mean_weekly_flu:  267.192308<br />country: Paraguay<br />country: Paraguay","year: 2010<br />mean_weekly_flu:  192.634615<br />country: Paraguay<br />country: Paraguay","year: 2011<br />mean_weekly_flu:  179.750000<br />country: Paraguay<br />country: Paraguay","year: 2012<br />mean_weekly_flu:  170.000000<br />country: Paraguay<br />country: Paraguay","year: 2013<br />mean_weekly_flu:  226.057692<br />country: Paraguay<br />country: Paraguay","year: 2014<br />mean_weekly_flu:  254.653846<br />country: Paraguay<br />country: Paraguay","year: 2015<br />mean_weekly_flu:  309.187500<br />country: Paraguay<br />country: Paraguay"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,179,241,1)","dash":"solid"},"hoveron":"points","name":"Paraguay","legendgroup":"Paraguay","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,179,241,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,179,241,1)"}},"frame":null},{"x":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[329,393.096153846154,329.673076923077,308.461538461538,282.905660377359,264.807692307692,229.730769230769,200.615384615385,164.25,135.634615384615,127.716981132075,130.326923076923,126.057692307692,125.625],"text":["year: 2002<br />mean_weekly_flu:  329.000000<br />country: Peru<br />country: Peru","year: 2003<br />mean_weekly_flu:  393.096154<br />country: Peru<br />country: Peru","year: 2004<br />mean_weekly_flu:  329.673077<br />country: Peru<br />country: Peru","year: 2005<br />mean_weekly_flu:  308.461538<br />country: Peru<br />country: Peru","year: 2006<br />mean_weekly_flu:  282.905660<br />country: Peru<br />country: Peru","year: 2007<br />mean_weekly_flu:  264.807692<br />country: Peru<br />country: Peru","year: 2008<br />mean_weekly_flu:  229.730769<br />country: Peru<br />country: Peru","year: 2009<br />mean_weekly_flu:  200.615385<br />country: Peru<br />country: Peru","year: 2010<br />mean_weekly_flu:  164.250000<br />country: Peru<br />country: Peru","year: 2011<br />mean_weekly_flu:  135.634615<br />country: Peru<br />country: Peru","year: 2012<br />mean_weekly_flu:  127.716981<br />country: Peru<br />country: Peru","year: 2013<br />mean_weekly_flu:  130.326923<br />country: Peru<br />country: Peru","year: 2014<br />mean_weekly_flu:  126.057692<br />country: Peru<br />country: Peru","year: 2015<br />mean_weekly_flu:  125.625000<br />country: Peru<br />country: Peru"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,171,253,1)","dash":"solid"},"hoveron":"points","name":"Peru","legendgroup":"Peru","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,171,253,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,171,253,1)"}},"frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[46.5714285714286,93.9615384615385,47.5660377358491,52.9615384615385,50.3269230769231,106.173076923077,24.3076923076923,45.7115384615385,31.5094339622642,51.9615384615385,29.5384615384615,61.125],"text":["year: 2004<br />mean_weekly_flu:   46.571429<br />country: Poland<br />country: Poland","year: 2005<br />mean_weekly_flu:   93.961538<br />country: Poland<br />country: Poland","year: 2006<br />mean_weekly_flu:   47.566038<br />country: Poland<br />country: Poland","year: 2007<br />mean_weekly_flu:   52.961538<br />country: Poland<br />country: Poland","year: 2008<br />mean_weekly_flu:   50.326923<br />country: Poland<br />country: Poland","year: 2009<br />mean_weekly_flu:  106.173077<br />country: Poland<br />country: Poland","year: 2010<br />mean_weekly_flu:   24.307692<br />country: Poland<br />country: Poland","year: 2011<br />mean_weekly_flu:   45.711538<br />country: Poland<br />country: Poland","year: 2012<br />mean_weekly_flu:   31.509434<br />country: Poland<br />country: Poland","year: 2013<br />mean_weekly_flu:   51.961538<br />country: Poland<br />country: Poland","year: 2014<br />mean_weekly_flu:   29.538462<br />country: Poland<br />country: Poland","year: 2015<br />mean_weekly_flu:   61.125000<br />country: Poland<br />country: Poland"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(70,160,255,1)","dash":"solid"},"hoveron":"points","name":"Poland","legendgroup":"Poland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(70,160,255,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(70,160,255,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[697.212765957447,719.096153846154,774.692307692308,768.169811320755,774,755.038461538462,791.903846153846,620.115384615385,667.038461538462,609.207547169811,651.903846153846,663.153846153846,739.96875],"text":["year: 2003<br />mean_weekly_flu:  697.212766<br />country: Romania<br />country: Romania","year: 2004<br />mean_weekly_flu:  719.096154<br />country: Romania<br />country: Romania","year: 2005<br />mean_weekly_flu:  774.692308<br />country: Romania<br />country: Romania","year: 2006<br />mean_weekly_flu:  768.169811<br />country: Romania<br />country: Romania","year: 2007<br />mean_weekly_flu:  774.000000<br />country: Romania<br />country: Romania","year: 2008<br />mean_weekly_flu:  755.038462<br />country: Romania<br />country: Romania","year: 2009<br />mean_weekly_flu:  791.903846<br />country: Romania<br />country: Romania","year: 2010<br />mean_weekly_flu:  620.115385<br />country: Romania<br />country: Romania","year: 2011<br />mean_weekly_flu:  667.038462<br />country: Romania<br />country: Romania","year: 2012<br />mean_weekly_flu:  609.207547<br />country: Romania<br />country: Romania","year: 2013<br />mean_weekly_flu:  651.903846<br />country: Romania<br />country: Romania","year: 2014<br />mean_weekly_flu:  663.153846<br />country: Romania<br />country: Romania","year: 2015<br />mean_weekly_flu:  739.968750<br />country: Romania<br />country: Romania"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(135,148,255,1)","dash":"solid"},"hoveron":"points","name":"Romania","legendgroup":"Romania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(135,148,255,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(135,148,255,1)"}},"frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[317.769230769231,261.461538461538,296.094339622641,319.038461538462,403.384615384615,564.634615384615,448.5,506.769230769231,513.452830188679,637.192307692308,595.5,670.21875],"text":["year: 2004<br />mean_weekly_flu:  317.769231<br />country: Russia<br />country: Russia","year: 2005<br />mean_weekly_flu:  261.461538<br />country: Russia<br />country: Russia","year: 2006<br />mean_weekly_flu:  296.094340<br />country: Russia<br />country: Russia","year: 2007<br />mean_weekly_flu:  319.038462<br />country: Russia<br />country: Russia","year: 2008<br />mean_weekly_flu:  403.384615<br />country: Russia<br />country: Russia","year: 2009<br />mean_weekly_flu:  564.634615<br />country: Russia<br />country: Russia","year: 2010<br />mean_weekly_flu:  448.500000<br />country: Russia<br />country: Russia","year: 2011<br />mean_weekly_flu:  506.769231<br />country: Russia<br />country: Russia","year: 2012<br />mean_weekly_flu:  513.452830<br />country: Russia<br />country: Russia","year: 2013<br />mean_weekly_flu:  637.192308<br />country: Russia<br />country: Russia","year: 2014<br />mean_weekly_flu:  595.500000<br />country: Russia<br />country: Russia","year: 2015<br />mean_weekly_flu:  670.218750<br />country: Russia<br />country: Russia"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(176,134,255,1)","dash":"solid"},"hoveron":"points","name":"Russia","legendgroup":"Russia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(176,134,255,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(176,134,255,1)"}},"frame":null},{"x":[2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[2700.96078431373,2606.19230769231,2603.40384615385,2891.23076923077,2491.13461538462,2483.65384615385,2575.83018867925,2705.21153846154,2991.86538461538,3091.875],"text":["year: 2006<br />mean_weekly_flu: 2700.960784<br />country: South Africa<br />country: South Africa","year: 2007<br />mean_weekly_flu: 2606.192308<br />country: South Africa<br />country: South Africa","year: 2008<br />mean_weekly_flu: 2603.403846<br />country: South Africa<br />country: South Africa","year: 2009<br />mean_weekly_flu: 2891.230769<br />country: South Africa<br />country: South Africa","year: 2010<br />mean_weekly_flu: 2491.134615<br />country: South Africa<br />country: South Africa","year: 2011<br />mean_weekly_flu: 2483.653846<br />country: South Africa<br />country: South Africa","year: 2012<br />mean_weekly_flu: 2575.830189<br />country: South Africa<br />country: South Africa","year: 2013<br />mean_weekly_flu: 2705.211538<br />country: South Africa<br />country: South Africa","year: 2014<br />mean_weekly_flu: 2991.865385<br />country: South Africa<br />country: South Africa","year: 2015<br />mean_weekly_flu: 3091.875000<br />country: South Africa<br />country: South Africa"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(206,121,255,1)","dash":"solid"},"hoveron":"points","name":"South Africa","legendgroup":"South Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(206,121,255,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(206,121,255,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[77.3571428571429,27.6346153846154,63.0384615384615,38.8867924528302,62.4230769230769,42.4807692307692,77.1346153846154,13.9807692307692,23.5384615384615,36.5660377358491,53.25,57.8846153846154,151.96875],"text":["year: 2003<br />mean_weekly_flu:   77.357143<br />country: Spain<br />country: Spain","year: 2004<br />mean_weekly_flu:   27.634615<br />country: Spain<br />country: Spain","year: 2005<br />mean_weekly_flu:   63.038462<br />country: Spain<br />country: Spain","year: 2006<br />mean_weekly_flu:   38.886792<br />country: Spain<br />country: Spain","year: 2007<br />mean_weekly_flu:   62.423077<br />country: Spain<br />country: Spain","year: 2008<br />mean_weekly_flu:   42.480769<br />country: Spain<br />country: Spain","year: 2009<br />mean_weekly_flu:   77.134615<br />country: Spain<br />country: Spain","year: 2010<br />mean_weekly_flu:   13.980769<br />country: Spain<br />country: Spain","year: 2011<br />mean_weekly_flu:   23.538462<br />country: Spain<br />country: Spain","year: 2012<br />mean_weekly_flu:   36.566038<br />country: Spain<br />country: Spain","year: 2013<br />mean_weekly_flu:   53.250000<br />country: Spain<br />country: Spain","year: 2014<br />mean_weekly_flu:   57.884615<br />country: Spain<br />country: Spain","year: 2015<br />mean_weekly_flu:  151.968750<br />country: Spain<br />country: Spain"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(228,109,246,1)","dash":"solid"},"hoveron":"points","name":"Spain","legendgroup":"Spain","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(228,109,246,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(228,109,246,1)"}},"frame":null},{"x":[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[3.42857142857143,2.88679245283019,3.44230769230769,3.25,9.11538461538461,2.03846153846154,3.86538461538462,6.94339622641509,10.6923076923077,5.11538461538461,10.25],"text":["year: 2005<br />mean_weekly_flu:    3.428571<br />country: Sweden<br />country: Sweden","year: 2006<br />mean_weekly_flu:    2.886792<br />country: Sweden<br />country: Sweden","year: 2007<br />mean_weekly_flu:    3.442308<br />country: Sweden<br />country: Sweden","year: 2008<br />mean_weekly_flu:    3.250000<br />country: Sweden<br />country: Sweden","year: 2009<br />mean_weekly_flu:    9.115385<br />country: Sweden<br />country: Sweden","year: 2010<br />mean_weekly_flu:    2.038462<br />country: Sweden<br />country: Sweden","year: 2011<br />mean_weekly_flu:    3.865385<br />country: Sweden<br />country: Sweden","year: 2012<br />mean_weekly_flu:    6.943396<br />country: Sweden<br />country: Sweden","year: 2013<br />mean_weekly_flu:   10.692308<br />country: Sweden<br />country: Sweden","year: 2014<br />mean_weekly_flu:    5.115385<br />country: Sweden<br />country: Sweden","year: 2015<br />mean_weekly_flu:   10.250000<br />country: Sweden<br />country: Sweden"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(243,101,230,1)","dash":"solid"},"hoveron":"points","name":"Sweden","legendgroup":"Sweden","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(243,101,230,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(243,101,230,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[135.777777777778,30.7692307692308,74.0192307692308,33.6037735849057,57.6730769230769,64.3269230769231,112.230769230769,20.0769230769231,44.5,55.5471698113208,122.673076923077,74.4230769230769,199.6875],"text":["year: 2003<br />mean_weekly_flu:  135.777778<br />country: Switzerland<br />country: Switzerland","year: 2004<br />mean_weekly_flu:   30.769231<br />country: Switzerland<br />country: Switzerland","year: 2005<br />mean_weekly_flu:   74.019231<br />country: Switzerland<br />country: Switzerland","year: 2006<br />mean_weekly_flu:   33.603774<br />country: Switzerland<br />country: Switzerland","year: 2007<br />mean_weekly_flu:   57.673077<br />country: Switzerland<br />country: Switzerland","year: 2008<br />mean_weekly_flu:   64.326923<br />country: Switzerland<br />country: Switzerland","year: 2009<br />mean_weekly_flu:  112.230769<br />country: Switzerland<br />country: Switzerland","year: 2010<br />mean_weekly_flu:   20.076923<br />country: Switzerland<br />country: Switzerland","year: 2011<br />mean_weekly_flu:   44.500000<br />country: Switzerland<br />country: Switzerland","year: 2012<br />mean_weekly_flu:   55.547170<br />country: Switzerland<br />country: Switzerland","year: 2013<br />mean_weekly_flu:  122.673077<br />country: Switzerland<br />country: Switzerland","year: 2014<br />mean_weekly_flu:   74.423077<br />country: Switzerland<br />country: Switzerland","year: 2015<br />mean_weekly_flu:  199.687500<br />country: Switzerland<br />country: Switzerland"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(252,97,212,1)","dash":"solid"},"hoveron":"points","name":"Switzerland","legendgroup":"Switzerland","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(252,97,212,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(252,97,212,1)"}},"frame":null},{"x":[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[503.583333333333,332.943396226415,406.519230769231,393.403846153846,492.826923076923,386.5,379.903846153846,365.566037735849,422.211538461538,386.769230769231,378.15625],"text":["year: 2005<br />mean_weekly_flu:  503.583333<br />country: Ukraine<br />country: Ukraine","year: 2006<br />mean_weekly_flu:  332.943396<br />country: Ukraine<br />country: Ukraine","year: 2007<br />mean_weekly_flu:  406.519231<br />country: Ukraine<br />country: Ukraine","year: 2008<br />mean_weekly_flu:  393.403846<br />country: Ukraine<br />country: Ukraine","year: 2009<br />mean_weekly_flu:  492.826923<br />country: Ukraine<br />country: Ukraine","year: 2010<br />mean_weekly_flu:  386.500000<br />country: Ukraine<br />country: Ukraine","year: 2011<br />mean_weekly_flu:  379.903846<br />country: Ukraine<br />country: Ukraine","year: 2012<br />mean_weekly_flu:  365.566038<br />country: Ukraine<br />country: Ukraine","year: 2013<br />mean_weekly_flu:  422.211538<br />country: Ukraine<br />country: Ukraine","year: 2014<br />mean_weekly_flu:  386.769231<br />country: Ukraine<br />country: Ukraine","year: 2015<br />mean_weekly_flu:  378.156250<br />country: Ukraine<br />country: Ukraine"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(255,98,190,1)","dash":"solid"},"hoveron":"points","name":"Ukraine","legendgroup":"Ukraine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,98,190,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,98,190,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[3087.92857142857,1126.78846153846,1614.59615384615,1465.22641509434,1409.61538461538,1787.36538461538,2680.65384615385,1406.92307692308,1661.82692307692,2319.20754716981,2503.76923076923,1920.15384615385,1915.46875],"text":["year: 2003<br />mean_weekly_flu: 3087.928571<br />country: United States<br />country: United States","year: 2004<br />mean_weekly_flu: 1126.788462<br />country: United States<br />country: United States","year: 2005<br />mean_weekly_flu: 1614.596154<br />country: United States<br />country: United States","year: 2006<br />mean_weekly_flu: 1465.226415<br />country: United States<br />country: United States","year: 2007<br />mean_weekly_flu: 1409.615385<br />country: United States<br />country: United States","year: 2008<br />mean_weekly_flu: 1787.365385<br />country: United States<br />country: United States","year: 2009<br />mean_weekly_flu: 2680.653846<br />country: United States<br />country: United States","year: 2010<br />mean_weekly_flu: 1406.923077<br />country: United States<br />country: United States","year: 2011<br />mean_weekly_flu: 1661.826923<br />country: United States<br />country: United States","year: 2012<br />mean_weekly_flu: 2319.207547<br />country: United States<br />country: United States","year: 2013<br />mean_weekly_flu: 2503.769231<br />country: United States<br />country: United States","year: 2014<br />mean_weekly_flu: 1920.153846<br />country: United States<br />country: United States","year: 2015<br />mean_weekly_flu: 1915.468750<br />country: United States<br />country: United States"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(255,103,166,1)","dash":"solid"},"hoveron":"points","name":"United States","legendgroup":"United States","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,103,166,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,103,166,1)"}},"frame":null},{"x":[2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[153.452380952381,145.288461538462,127.826923076923,127.849056603774,142.884615384615,121.903846153846,110.961538461538,97.8269230769231,90.1153846153846,95.6603773584906,96.25,103.653846153846,131.09375],"text":["year: 2003<br />mean_weekly_flu:  153.452381<br />country: Uruguay<br />country: Uruguay","year: 2004<br />mean_weekly_flu:  145.288462<br />country: Uruguay<br />country: Uruguay","year: 2005<br />mean_weekly_flu:  127.826923<br />country: Uruguay<br />country: Uruguay","year: 2006<br />mean_weekly_flu:  127.849057<br />country: Uruguay<br />country: Uruguay","year: 2007<br />mean_weekly_flu:  142.884615<br />country: Uruguay<br />country: Uruguay","year: 2008<br />mean_weekly_flu:  121.903846<br />country: Uruguay<br />country: Uruguay","year: 2009<br />mean_weekly_flu:  110.961538<br />country: Uruguay<br />country: Uruguay","year: 2010<br />mean_weekly_flu:   97.826923<br />country: Uruguay<br />country: Uruguay","year: 2011<br />mean_weekly_flu:   90.115385<br />country: Uruguay<br />country: Uruguay","year: 2012<br />mean_weekly_flu:   95.660377<br />country: Uruguay<br />country: Uruguay","year: 2013<br />mean_weekly_flu:   96.250000<br />country: Uruguay<br />country: Uruguay","year: 2014<br />mean_weekly_flu:  103.653846<br />country: Uruguay<br />country: Uruguay","year: 2015<br />mean_weekly_flu:  131.093750<br />country: Uruguay<br />country: Uruguay"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(254,110,139,1)","dash":"solid"},"hoveron":"points","name":"Uruguay","legendgroup":"Uruguay","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(254,110,139,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(254,110,139,1)"}},"frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Weekly flu cases per country","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2001.35,2015.65],"tickmode":"array","ticktext":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"],"tickvals":[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"categoryorder":"array","categoryarray":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-165.31512605042,3508.71568627451],"tickmode":"array","ticktext":["0","1000","2000","3000"],"tickvals":[0,1000,2000,3000],"categoryorder":"array","categoryarray":["0","1000","2000","3000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Average number of flu cases per week<br />per 100,000 population","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"ec481ae46d0d":{"x":{},"y":{},"colour":{},"type":"scatter"},"ec48ab37e46":{"x":{},"y":{},"colour":{}}},"cur_data":"ec481ae46d0d","visdat":{"ec481ae46d0d":["function (y) ","x"],"ec48ab37e46":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 5.5: Interactive scatter plot showing the normalized number of flu cases per country, with on the y-axis the average number of flu cases per week per 100,000 population and on the x-axis the year.
</p>
</div>
<p>Northern American countries United States and Canada still stand out, having higher weekly averages than most countries, despite the numbers being normalized for this graph. South Africa does have the highest average number of flu cases per week per 100,000 population since data started being collected from there.</p>
<p>Now that the analysis and visualization is done, Rstudio can be disconnected from the database.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="working-with-relational-databases.html#cb68-1" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con) </span></code></pre></div>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-gublerGlobalEmergenceResurgence2002a" class="csl-entry">
Gubler, Duane J. 2002. <span>“The Global Emergence/Resurgence of Arboviral Diseases As Public Health Problems.”</span> <em>Archives of Medical Research</em> 33 (4): 330–42. <a href="https://doi.org/10.1016/S0188-4409(02)00378-8">https://doi.org/10.1016/S0188-4409(02)00378-8</a>.
</div>
<div id="ref-irizarryDslabsDataScience2021" class="csl-entry">
Irizarry, Rafael A., and Amy Gill. 2021. <span>“Dslabs: Data Science Labs.”</span> <a href="https://CRAN.R-project.org/package=dslabs">https://CRAN.R-project.org/package=dslabs</a>.
</div>
<div id="ref-taylorInterpretationCorrelationCoefficient1990" class="csl-entry">
Taylor, Richard. 1990. <span>“Interpretation of the Correlation Coefficient: A Basic Review.”</span> <em>Journal of Diagnostic Medical Sonography</em> 6 (1): 35–39. <a href="https://doi.org/10.1177/875647939000600106">https://doi.org/10.1177/875647939000600106</a>.
</div>
<div id="ref-wickhamRPostgresRcppInterface2022" class="csl-entry">
Wickham, H, J Ooms, and K Müller. 2022. <span>“RPostgres: Rcpp Interface to PostgreSQL.”</span> <a href="https://rpostgres.r-dbi.org">https://rpostgres.r-dbi.org</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="drugscreening.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="parameterized.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["portfolio_book.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
